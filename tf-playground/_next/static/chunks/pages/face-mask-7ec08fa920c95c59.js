(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{9799:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/face-mask",function(){return n(6384)}])},4569:function(t,e,n){"use strict";n.d(e,{W:function(){return a}});var r=n(5893),i=n(949),o=n(3236);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(t){var e=(0,i.If)().colorMode;return(0,r.jsx)(o.xu,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){s(t,e,n[e])}))}return t}({bg:{light:"gray.50",dark:"gray.700"}[e],color:{light:"black",dark:"white"}[e]},t))}},6384:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return nt}});var r=n(5893),i=n(4569),o=n(8520),s=n.n(o),a=n(5217),u=n(6537),c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function l(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function f(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var p=function(t){return{startEndTensor:t,startPoint:(0,a.slice)(t,[0,0],[-1,2]),endPoint:(0,a.slice)(t,[0,2],[-1,2])}},v={strides:[8,16],anchors:[2,6]};function m(t,e){var n,r,i;if(t.topLeft instanceof a.Tensor&&t.bottomRight instanceof a.Tensor){var o=(0,a.tidy)((function(){return[(0,a.concat)([(0,a.slice)((0,a.sub)(e-1,t.topLeft),0,1),(0,a.slice)(t.topLeft,1,1)]),(0,a.concat)([(0,a.sub)(e-1,(0,a.slice)(t.bottomRight,0,1)),(0,a.slice)(t.bottomRight,1,1)])]}));n=o[0],r=o[1],null!=t.landmarks&&(i=(0,a.tidy)((function(){var n=(0,a.sub)((0,a.tensor1d)([e-1,0]),t.landmarks),r=(0,a.tensor1d)([1,-1]);return(0,a.mul)(n,r)})))}else{var s=t.topLeft,u=s[0],c=s[1],l=t.bottomRight,h=l[0],d=l[1];n=[e-1-u,c],r=[e-1-h,d],null!=t.landmarks&&(i=t.landmarks.map((function(t){return[e-1-t[0],t[1]]})))}var f={topLeft:n,bottomRight:r};return null!=i&&(f.landmarks=i),null!=t.probability&&(f.probability=t.probability instanceof a.Tensor?t.probability.clone():t.probability),f}function b(t,e){return(0,a.tidy)((function(){var n;return n=t.hasOwnProperty("box")?t.box:t,(0,a.squeeze)(function(t,e){var n=(0,a.mul)(t.startPoint,e),r=(0,a.mul)(t.endPoint,e),i=(0,a.concat2d)([n,r],1);return p(i)}(n,e).startEndTensor)}))}var g=function(){function t(t,e,n,r,i,o){this.blazeFaceModel=t,this.width=e,this.height=n,this.maxFaces=r,this.anchorsData=function(t,e,n){for(var r=[],i=0;i<n.strides.length;i++)for(var o=n.strides[i],s=Math.floor((e+o-1)/o),a=Math.floor((t+o-1)/o),u=n.anchors[i],c=0;c<s;c++)for(var l=o*(c+.5),h=0;h<a;h++)for(var d=o*(h+.5),f=0;f<u;f++)r.push([d,l]);return r}(e,n,v),this.anchors=(0,a.tensor2d)(this.anchorsData),this.inputSizeData=[e,n],this.inputSize=(0,a.tensor1d)([e,n]),this.iouThreshold=i,this.scoreThreshold=o}return t.prototype.getBoundingBoxes=function(t,e,n){return void 0===n&&(n=!0),d(this,void 0,void 0,(function(){var r,i,o,s,u,c,l,h,v,m,b,g,y,w,P=this;return f(this,(function(x){switch(x.label){case 0:return r=(0,a.tidy)((function(){var e=a.image.resizeBilinear(t,[P.width,P.height]),n=(0,a.mul)((0,a.sub)((0,a.div)(e,255),.5),2),r=P.blazeFaceModel.predict(n),i=(0,a.squeeze)(r),o=function(t,e,n){var r=(0,a.slice)(t,[0,1],[-1,2]),i=(0,a.add)(r,e),o=(0,a.slice)(t,[0,3],[-1,2]),s=(0,a.div)(o,n),u=(0,a.div)(i,n),c=(0,a.div)(s,2),l=(0,a.sub)(u,c),h=(0,a.add)(u,c),d=(0,a.mul)(l,n),f=(0,a.mul)(h,n);return(0,a.concat2d)([d,f],1)}(i,P.anchors,P.inputSize),s=(0,a.slice)(i,[0,0],[-1,1]);return[i,o,(0,a.squeeze)((0,a.sigmoid)(s))]})),i=r[0],o=r[1],s=r[2],u=console.warn,console.warn=function(){},c=a.image.nonMaxSuppression(o,s,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=u,[4,c.array()];case 1:return l=x.sent(),c.dispose(),h=l.map((function(t){return(0,a.slice)(o,[t,0],[1,-1])})),e?[3,3]:[4,Promise.all(h.map((function(t){return d(P,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return[4,t.array()];case 1:return e=n.sent(),t.dispose(),[2,e]}}))}))})))];case 2:h=x.sent(),x.label=3;case 3:for(v=t.shape[1],m=t.shape[2],b=e?(0,a.div)([m,v],this.inputSize):[m/this.inputSizeData[0],v/this.inputSizeData[1]],g=[],y=function(t){var r=h[t],o=(0,a.tidy)((function(){var o=p(r instanceof a.Tensor?r:(0,a.tensor2d)(r));if(!n)return o;var u,c=l[t];return u=e?(0,a.slice)(P.anchors,[c,0],[1,2]):P.anchorsData[c],{box:o,landmarks:(0,a.reshape)((0,a.squeeze)((0,a.slice)(i,[c,5],[1,-1])),[6,-1]),probability:(0,a.slice)(s,[c],[1]),anchor:u}}));g.push(o)},w=0;w<h.length;w++)y(w);return o.dispose(),s.dispose(),i.dispose(),[2,{boxes:g,scaleFactor:b}]}}))}))},t.prototype.estimateFaces=function(t,e,n,r){return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),d(this,void 0,void 0,(function(){var i,o,s,u,c,l,h=this;return f(this,(function(p){switch(p.label){case 0:return i=function(t){return t instanceof a.Tensor?[t.shape[0],t.shape[1]]:[t.height,t.width]}(t),o=i[1],s=(0,a.tidy)((function(){return t instanceof a.Tensor||(t=a.browser.fromPixels(t)),(0,a.expandDims)((0,a.cast)(t,"float32"),0)})),[4,this.getBoundingBoxes(s,e,r)];case 1:return u=p.sent(),c=u.boxes,l=u.scaleFactor,s.dispose(),e?[2,c.map((function(t){var e=b(t,l),i={topLeft:(0,a.slice)(e,[0],[2]),bottomRight:(0,a.slice)(e,[2],[2])};if(r){var s=t,u=s.landmarks,c=s.probability,h=s.anchor,d=(0,a.mul)((0,a.add)(u,h),l);i.landmarks=d,i.probability=c}return n&&(i=m(i,o)),i}))]:[2,Promise.all(c.map((function(t){return d(h,void 0,void 0,(function(){var e,i,s,a,u,c,h,p,v,g,y,w=this;return f(this,(function(P){switch(P.label){case 0:return e=b(t,l),r?[3,2]:[4,e.array()];case 1:return u=P.sent(),i={topLeft:u.slice(0,2),bottomRight:u.slice(2)},[3,4];case 2:return[4,Promise.all([t.landmarks,e,t.probability].map((function(t){return d(w,void 0,void 0,(function(){return f(this,(function(e){return[2,t.array()]}))}))})))];case 3:s=P.sent(),a=s[0],u=s[1],c=s[2],h=t.anchor,v=(p=l)[0],g=p[1],y=a.map((function(t){return[(t[0]+h[0])*v,(t[1]+h[1])*g]})),i={topLeft:u.slice(0,2),bottomRight:u.slice(2),landmarks:y,probability:c},function(t){t.startEndTensor.dispose(),t.startPoint.dispose(),t.endPoint.dispose()}(t.box),t.landmarks.dispose(),t.probability.dispose(),P.label=4;case 4:return e.dispose(),n&&(i=m(i,o)),[2,i]}}))}))})))]}}))}))},t}();function y(t){var e=void 0===t?{}:t,n=e.maxFaces,r=void 0===n?10:n,i=e.inputWidth,o=void 0===i?128:i,s=e.inputHeight,a=void 0===s?128:s,c=e.iouThreshold,l=void 0===c?.3:c,h=e.scoreThreshold,p=void 0===h?.75:h,v=e.modelUrl;return d(this,void 0,void 0,(function(){var t;return f(this,(function(e){switch(e.label){case 0:return null==v?[3,2]:[4,(0,u.YL)(v)];case 1:return t=e.sent(),[3,4];case 2:return[4,(0,u.YL)("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0})];case 3:t=e.sent(),e.label=4;case 4:return[2,new g(t,o,a,r,l,p)]}}))}))}var w={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]};function P(t){return[Math.abs(t.endPoint[0]-t.startPoint[0]),Math.abs(t.endPoint[1]-t.startPoint[1])]}function x(t){return[t.startPoint[0]+(t.endPoint[0]-t.startPoint[0])/2,t.startPoint[1]+(t.endPoint[1]-t.startPoint[1])/2]}function E(t,e){void 0===e&&(e=1.5);var n=x(t),r=P(t),i=[e*r[0]/2,e*r[1]/2];return{startPoint:[n[0]-i[0],n[1]-i[1]],endPoint:[n[0]+i[0],n[1]+i[1]],landmarks:t.landmarks}}function k(t){var e=x(t),n=P(t),r=Math.max.apply(Math,n)/2;return{startPoint:[e[0]-r,e[1]-r],endPoint:[e[0]+r,e[1]+r],landmarks:t.landmarks}}var L=[[1,0,0],[0,1,0],[0,0,1]];function M(t,e){return[[1,0,t],[0,1,e],[0,0,1]]}function I(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function T(t,e){for(var n=[],r=0;r<t.length;r++)n.push(t[r][e]);return n}function O(t,e){for(var n=[],r=t.length,i=0;i<r;i++){n.push([]);for(var o=0;o<r;o++)n[i].push(I(t[i],T(e,o)))}return n}function B(t,e){var n=Math.cos(t),r=Math.sin(t),i=[[n,-r,0],[r,n,0],[0,0,1]],o=O(M(e[0],e[1]),i);return O(o,M(-e[0],-e[1]))}var C=[13,w.midwayBetweenEyes[0]],R=[3,2],F=w.leftEyeLower0,S=[F[0],F[F.length-1]],z=w.rightEyeLower0,U=[z[0],z[z.length-1]],D=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]},{key:"EyebrowUpper",indices:[63,64,65,66,67,68,69,70]},{key:"EyebrowLower",indices:[48,49,50,51,52,53]}];function j(t,e,n,r){for(var i=0;i<D.length;i++){var o=D[i],s=o.key,a=o.indices,u=w[""+n+s];if(null==r||r.includes(s))for(var c=0;c<a.length;c++){var l=a[c];t[u[c]]=[e[l][0],e[l][1],(e[l][2]+t[u[c]][2])/2]}}}var W=function(){function t(t,e,n,r,i,o,s){this.regionsOfInterest=[],this.runsWithoutFaceDetector=0,this.boundingBoxDetector=t,this.meshDetector=e,this.irisModel=s,this.meshWidth=n,this.meshHeight=r,this.maxContinuousChecks=i,this.maxFaces=o}return t.prototype.transformRawCoords=function(t,e,n,r){var i,o,s,a,u=this,c=P({startPoint:e.startPoint,endPoint:e.endPoint}),l=[c[0]/this.meshWidth,c[1]/this.meshHeight],h=t.map((function(t){return[l[0]*(t[0]-u.meshWidth/2),l[1]*(t[1]-u.meshHeight/2),t[2]]})),d=B(n,[0,0]),f=h.map((function(t){return function(t,e){return[I(t,e[0]),I(t,e[1])]}(t,d).concat([t[2]])})),p=(o=[[(i=r)[0][0],i[1][0]],[i[0][1],i[1][1]]],s=[i[0][2],i[1][2]],a=[-I(o[0],s),-I(o[1],s)],[o[0].concat(a[0]),o[1].concat(a[1]),[0,0,1]]),v=x({startPoint:e.startPoint,endPoint:e.endPoint}).concat([1]),m=[I(v,p[0]),I(v,p[1])];return f.map((function(t){return[t[0]+m[0],t[1]+m[1],t[2]]}))},t.prototype.getLeftToRightEyeDepthDifference=function(t){return t[S[0]][2]-t[U[0]][2]},t.prototype.getEyeBox=function(t,e,n,r,i){void 0===i&&(i=!1);var o=k(E(this.calculateLandmarksBoundingBox([t[n],t[r]]),2.3)),s=P(o),u=a.image.cropAndResize(e,[[o.startPoint[1]/this.meshHeight,o.startPoint[0]/this.meshWidth,o.endPoint[1]/this.meshHeight,o.endPoint[0]/this.meshWidth]],[0],[64,64]);return i&&(u=a.image.flipLeftRight(u)),{box:o,boxSize:s,crop:u}},t.prototype.getEyeCoords=function(t,e,n,r){void 0===r&&(r=!1);for(var i=[],o=0;o<76;o++){var s=t[3*o],a=t[3*o+1],u=t[3*o+2];i.push([(r?1-s/64:s/64)*n[0]+e.startPoint[0],a/64*n[1]+e.startPoint[1],u])}return{rawCoords:i,iris:i.slice(71)}},t.prototype.getAdjustedIrisCoords=function(t,e,n){var r=t[w[n+"EyeUpper0"][3]][2],i=t[w[n+"EyeLower0"][4]][2],o=(r+i)/2;return e.map((function(t,e){var n=o;return 2===e?n=r:4===e&&(n=i),[t[0],t[1],n]}))},t.prototype.predict=function(t,e){return l(this,void 0,void 0,(function(){var n,r,i,o,s=this;return h(this,(function(u){switch(u.label){case 0:return this.shouldUpdateRegionsOfInterest()?[4,this.boundingBoxDetector.getBoundingBoxes(t,!1,!0)]:[3,2];case 1:return n=u.sent(),r=n.boxes,i=n.scaleFactor,0===r.length?(this.regionsOfInterest=[],[2,null]):(o=r.map((function(t){var e,n,r={startPoint:(0,a.squeeze)(t.box.startPoint).arraySync(),endPoint:(0,a.squeeze)(t.box.endPoint).arraySync()},o=k(E((n=i,{startPoint:[(e=r).startPoint[0]*n[0],e.startPoint[1]*n[1]],endPoint:[e.endPoint[0]*n[0],e.endPoint[1]*n[1]]})));return c({},o,{landmarks:t.landmarks.arraySync()})})),r.forEach((function(t){null!=t&&null!=t.startPoint&&(t.startEndTensor.dispose(),t.startPoint.dispose(),t.endPoint.dispose())})),this.updateRegionsOfInterest(o),this.runsWithoutFaceDetector=0,[3,3]);case 2:this.runsWithoutFaceDetector++,u.label=3;case 3:return[2,(0,a.tidy)((function(){return s.regionsOfInterest.map((function(n,r){var i,o=n.landmarks.length>=468,u=C[0],l=C[1];!1===o&&(u=R[0],l=R[1]),i=function(t,e){var n;return(n=Math.PI/2-Math.atan2(-(e[1]-t[1]),e[0]-t[0]))-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}(n.landmarks[u],n.landmarks[l]);var h=x({startPoint:n.startPoint,endPoint:n.endPoint}),d=[h[0]/t.shape[2],h[1]/t.shape[1]],f=t,p=L;0!==i&&(f=a.image.rotateWithOffset(t,i,0,d),p=B(-i,h));var v={startPoint:n.startPoint,endPoint:n.endPoint},m=(0,a.div)(function(t,e,n){var r=e.shape[1],i=e.shape[2],o=[[t.startPoint[1]/r,t.startPoint[0]/i,t.endPoint[1]/r,t.endPoint[0]/i]];return a.image.cropAndResize(e,o,[0],n,"bilinear",0)}(v,f,[s.meshHeight,s.meshWidth]),255),b=s.meshDetector.predict(m),g=b[1],y=b[2],w=(0,a.reshape)(y,[-1,3]).arraySync();if(e){var P=s.getEyeBox(w,m,S[0],S[1],!0),M=P.box,I=P.boxSize,T=P.crop,O=s.getEyeBox(w,m,U[0],U[1]),F=O.box,z=O.boxSize,D=O.crop,W=s.irisModel.predict((0,a.concat)([T,D])).dataSync(),_=W.slice(0,228),H=s.getEyeCoords(_,M,I,!0),A=H.rawCoords,q=H.iris,N=W.slice(228),V=s.getEyeCoords(N,F,z),Y=V.rawCoords,G=V.iris,K=s.getLeftToRightEyeDepthDifference(w);Math.abs(K)<30?(j(w,A,"left"),j(w,Y,"right")):K<1?j(w,A,"left",["EyeUpper0","EyeLower0"]):j(w,Y,"right",["EyeUpper0","EyeLower0"]);var X=s.getAdjustedIrisCoords(w,q,"left"),J=s.getAdjustedIrisCoords(w,G,"right");w=w.concat(X).concat(J)}var Q=s.transformRawCoords(w,n,i,p),Z=(0,a.tensor2d)(Q),$=E(s.calculateLandmarksBoundingBox(Q)),tt=k($);return s.regionsOfInterest[r]=c({},tt,{landmarks:Z.arraySync()}),{coords:(0,a.tensor2d)(w,[w.length,3]),scaledCoords:Z,box:$,flag:(0,a.squeeze)(g)}}))}))]}}))}))},t.prototype.updateRegionsOfInterest=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.regionsOfInterest[e],i=0;if(r&&r.startPoint){var o=n.startPoint,s=o[0],a=o[1],u=n.endPoint,c=u[0],l=u[1],h=r.startPoint,d=h[0],f=h[1],p=r.endPoint,v=p[0],m=p[1],b=Math.max(s,d),g=Math.max(a,f),y=(Math.min(c,v)-b)*(Math.min(l,m)-g);i=y/((c-s)*(l-a)+(v-d)*(m-a)-y)}i<.25&&(this.regionsOfInterest[e]=n)}this.regionsOfInterest=this.regionsOfInterest.slice(0,t.length)},t.prototype.clearRegionOfInterest=function(t){null!=this.regionsOfInterest[t]&&(this.regionsOfInterest=this.regionsOfInterest.slice(0,t).concat(this.regionsOfInterest.slice(t+1)))},t.prototype.shouldUpdateRegionsOfInterest=function(){var t=this.regionsOfInterest.length,e=0===t;return 1===this.maxFaces||e?e:t!==this.maxFaces&&this.runsWithoutFaceDetector>=this.maxContinuousChecks},t.prototype.calculateLandmarksBoundingBox=function(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{startPoint:[Math.min.apply(Math,e),Math.min.apply(Math,n)],endPoint:[Math.max.apply(Math,e),Math.max.apply(Math,n)]}},t}(),_=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]];function H(t){return l(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,d,f,p,v,m,b;return h(this,(function(h){switch(h.label){case 0:return e=t.maxContinuousChecks,n=void 0===e?5:e,r=t.detectionConfidence,i=void 0===r?.9:r,o=t.maxFaces,s=void 0===o?10:o,a=t.iouThreshold,u=void 0===a?.3:a,c=t.scoreThreshold,l=void 0===c?.75:c,d=t.shouldLoadIrisModel,f=void 0===d||d,p=t.modelUrl,v=t.detectorModelUrl,m=t.irisModelUrl,f?[4,Promise.all([A(v,s,u,l),q(p),N(m)])]:[3,2];case 1:return b=h.sent(),[3,4];case 2:return[4,Promise.all([A(v,s,u,l),q(p)])];case 3:b=h.sent(),h.label=4;case 4:return[2,new G(b[0],b[1],n,i,s,f?b[2]:null)]}}))}))}function A(t,e,n,r){return l(this,void 0,void 0,(function(){return h(this,(function(i){return[2,y({modelUrl:t,maxFaces:e,iouThreshold:n,scoreThreshold:r})]}))}))}function q(t){return l(this,void 0,void 0,(function(){return h(this,(function(e){return null!=t?[2,(0,u.YL)(t)]:[2,(0,u.YL)("https://tfhub.dev/mediapipe/tfjs-model/facemesh/1/default/1",{fromTFHub:!0})]}))}))}function N(t){return l(this,void 0,void 0,(function(){return h(this,(function(e){return null!=t?[2,(0,u.YL)(t)]:[2,(0,u.YL)("https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2",{fromTFHub:!0})]}))}))}function V(t,e){if(t.mesh instanceof a.Tensor){var n=(0,a.tidy)((function(){var n=(0,a.tensor1d)([e-1,0,0]),r=(0,a.tensor1d)([1,-1,1]);return(0,a.tidy)((function(){return[(0,a.concat)([(0,a.sub)(e-1,(0,a.slice)(t.boundingBox.topLeft,0,1)),(0,a.slice)(t.boundingBox.topLeft,1,1)]),(0,a.concat)([(0,a.sub)(e-1,(0,a.slice)(t.boundingBox.bottomRight,0,1)),(0,a.slice)(t.boundingBox.bottomRight,1,1)]),(0,a.mul)((0,a.sub)(n,t.mesh),r),(0,a.mul)((0,a.sub)(n,t.scaledMesh),r)]}))})),r=n[0],i=n[1],o=n[2],s=n[3];return Object.assign({},t,{boundingBox:{topLeft:r,bottomRight:i},mesh:o,scaledMesh:s})}return Object.assign({},t,{boundingBox:{topLeft:[e-1-t.boundingBox.topLeft[0],t.boundingBox.topLeft[1]],bottomRight:[e-1-t.boundingBox.bottomRight[0],t.boundingBox.bottomRight[1]]},mesh:t.mesh.map((function(t){var n=t.slice(0);return n[0]=e-1-t[0],n})),scaledMesh:t.scaledMesh.map((function(t){var n=t.slice(0);return n[0]=e-1-t[0],n}))})}var Y,G=function(){function t(t,e,n,r,i,o){this.kind="MediaPipeFaceMesh",this.pipeline=new W(t,e,192,192,n,i,o),this.detectionConfidence=r}return t.getAnnotations=function(){return w},t.getUVCoords=function(){return _},t.prototype.estimateFaces=function(t){return l(this,void 0,void 0,(function(){var e,n,r,i,o,s,u,c,d,f,p,v,m=this;return h(this,(function(b){switch(b.label){case 0:if(e=t.returnTensors,n=void 0!==e&&e,r=t.flipHorizontal,i=void 0!==r&&r,o=t.predictIrises,s=void 0===o||o,u=t.input,s&&null==this.pipeline.irisModel)throw new Error("The iris model was not loaded as part of facemesh. Please initialize the model with facemesh.load({shouldLoadIrisModel: true}).");return c=function(t){return t instanceof a.Tensor?[t.shape[0],t.shape[1]]:[t.height,t.width]}(u),d=c[1],f=(0,a.tidy)((function(){return u instanceof a.Tensor||(u=a.browser.fromPixels(u)),(0,a.expandDims)((0,a.cast)(u,"float32"),0)})),"webgl"!==(0,a.getBackend)()?[3,2]:(v=(0,a.env)().get("WEBGL_PACK_DEPTHWISECONV"),(0,a.env)().set("WEBGL_PACK_DEPTHWISECONV",!0),[4,this.pipeline.predict(f,s)]);case 1:return p=b.sent(),(0,a.env)().set("WEBGL_PACK_DEPTHWISECONV",v),[3,4];case 2:return[4,this.pipeline.predict(f,s)];case 3:p=b.sent(),b.label=4;case 4:return f.dispose(),null!=p&&p.length>0?[2,Promise.all(p.map((function(t,e){return l(m,void 0,void 0,(function(){var r,o,u,c,f,p,v,m,b,g,y,P,x,E,k=this;return h(this,(function(L){switch(L.label){case 0:return r=t.coords,o=t.scaledCoords,u=t.box,c=t.flag,f=[c],n||(f=f.concat([r,o])),[4,Promise.all(f.map((function(t){return l(k,void 0,void 0,(function(){return h(this,(function(e){return[2,t.array()]}))}))})))];case 1:if(p=L.sent(),v=p[0],c.dispose(),v<this.detectionConfidence&&this.pipeline.clearRegionOfInterest(e),n)return m={kind:"MediaPipePredictionTensors",faceInViewConfidence:v,mesh:r,scaledMesh:o,boundingBox:{topLeft:(0,a.tensor1d)(u.startPoint),bottomRight:(0,a.tensor1d)(u.endPoint)}},i?[2,V(m,d)]:[2,m];for(E in b=p.slice(1),g=b[0],y=b[1],o.dispose(),r.dispose(),P={kind:"MediaPipePredictionValues",faceInViewConfidence:v,boundingBox:{topLeft:u.startPoint,bottomRight:u.endPoint},mesh:g,scaledMesh:y},i&&(P=V(P,d)),x={},w)(s||!1===E.includes("Iris"))&&(x[E]=w[E].map((function(t){return P.scaledMesh[t]})));return P.annotations=x,[2,P]}}))}))})))]:[2,[]]}}))}))},t}();function K(t,e){return void 0===t&&(t=Y.mediapipeFacemesh),void 0===e&&(e={}),l(this,void 0,void 0,(function(){return h(this,(function(n){if(t===Y.mediapipeFacemesh)return[2,H(e)];throw new Error(t+" is not a valid package name.")}))}))}(Y||(Y={})).mediapipeFacemesh="mediapipe-facemesh";var X=n(7294),J=n(4970),Q=n.n(J);n(343);function Z(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function $(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){Z(o,r,i,s,a,"next",t)}function a(t){Z(o,r,i,s,a,"throw",t)}s(void 0)}))}}function tt(){var t,e,n=(0,X.useRef)(null),i=(0,X.useRef)(null),o=$(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(Y.mediapipeFacemesh);case 2:e=t.sent,a(e);case 4:case"end":return t.stop()}}),t)}))),a=$(s().mark((function t(e){var r,o,u,c,l,h;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.current||!i.current){t.next=14;break}if(4!==(r=n.current).video.readyState){t.next=14;break}return o=r.video,u=r.video.videoWidth,c=r.video.videoHeight,i.current.width=u,i.current.height=c,t.next=10,e.estimateFaces({input:o});case 10:l=t.sent,h=i.current.getContext("2d"),requestAnimationFrame((function(){et(l,h,u,c)})),a(e);case 14:case"end":return t.stop()}}),t)})));return(0,X.useEffect)((function(){o()}),[null===(t=n.current)||void 0===t||null===(e=t.video)||void 0===e?void 0:e.readyState]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q(),{audio:!1,ref:n,style:{position:"absolute",margin:"auto",textAlign:"center",top:100,left:0,right:0,zIndex:9}}),(0,r.jsx)("canvas",{ref:i,style:{position:"absolute",margin:"auto",textAlign:"center",top:100,left:0,right:0,zIndex:9}})]})}var et=function(t,e,n,r){t.length>0&&t.forEach((function(t){var i=t.scaledMesh,o=t.boundingBox,s=o.bottomRight,a=o.topLeft,u=.02*Math.sqrt(Math.pow(s[0]-a[0],2)+Math.pow(a[1]-a[1],2));e.clearRect(0,0,n,r),e.fillStyle="black",e.save(),e.beginPath(),function(t,e,n){var r=[93,132,58,172,136,150,149,176,148,152,377,400,378,379,365,397,288,361,323];t.moveTo(e[195][0],e[195][1]);for(var i=0;i<r.length;i++)i<r.length/2?t.lineTo(e[r[i]][0]-n,e[r[i]][1]+n):t.lineTo(e[r[i]][0]+n,e[r[i]][1]+n)}(e,i,u),e.closePath(),e.fill(),e.restore()}))},nt=function(){return(0,r.jsx)(i.W,{height:"100%",children:(0,r.jsx)(tt,{})})}},5410:function(){},8628:function(){},5042:function(){}},function(t){t.O(0,[132,236,955,774,888,179],(function(){return e=9799,t(t.s=e);var e}));var e=t.O();_N_E=e}]);