(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[278],{1758:function(d,c,a){"use strict";a.d(c,{Fq:function(){return l},Xs:function(){return o},vO:function(){return k}});var e=a(7462),f=a(9477),b=a(7294),g=a(745),h=a(4609),i=a(5878);let j=b.createContext(null);function k(){return b.useContext(j)}function l({eps:g=1e-5,enabled:i=!0,infinite:k,horizontal:a,pages:c=1,distance:l=1,damping:m=4,style:v={},children:n}){let{get:w,setEvents:x,gl:o,size:p,invalidate:q,events:r}=(0,h.w)(),[d]=b.useState(()=>document.createElement("div")),[s]=b.useState(()=>document.createElement("div")),[t]=b.useState(()=>document.createElement("div")),u=o.domElement.parentNode,y=b.useRef(0),e=b.useMemo(()=>{let b={el:d,eps:g,fill:s,fixed:t,horizontal:a,damping:m,offset:0,delta:0,scroll:y,pages:c,range(d,e,b=0){let a=d-b,c=a+e+2*b;return this.offset<a?0:this.offset>c?1:(this.offset-a)/(c-a)},curve(a,b,c=0){return Math.sin(this.range(a,b,c)*Math.PI)},visible(c,d,a=0){let b=c-a;return this.offset>=b&&this.offset<=b+d+2*a}};return b},[g,m,a,c]);b.useEffect(()=>{for(let b in d.style.position="absolute",d.style.width="100%",d.style.height="100%",d.style[a?"overflowX":"overflowY"]="auto",d.style[a?"overflowY":"overflowX"]="hidden",d.style.top="0px",d.style.left="0px",v)d.style[b]=v[b];t.style.position="sticky",t.style.top="0px",t.style.left="0px",t.style.width="100%",t.style.height="100%",t.style.overflow="hidden",d.appendChild(t),s.style.height=a?"100%":`${c*l*100}%`,s.style.width=a?`${c*l*100}%`:"100%",s.style.pointerEvents="none",d.appendChild(s),u.appendChild(d),d[a?"scrollLeft":"scrollTop"]=1;let e=r.connected||o.domElement;requestAnimationFrame(()=>null==r.connect?void 0:r.connect(d));let f=w().events.compute;return x({compute(b,a){let c=b.clientX-u.offsetLeft,d=b.clientY-u.offsetTop;a.pointer.set(c/a.size.width*2-1,-(2*(d/a.size.height))+1),a.raycaster.setFromCamera(a.pointer,a.camera)}}),()=>{u.removeChild(d),x({compute:f}),null==r.connect||r.connect(e)}},[c,l,a,d,s,t,u]),b.useEffect(()=>{if(r.connected===d){let b=p[a?"width":"height"],c=d[a?"scrollWidth":"scrollHeight"],h=c-b,j=0,l=!0,m=!0,f=()=>{if(i&&!m&&(q(),j=d[a?"scrollLeft":"scrollTop"],y.current=j/h,k)){if(!l){if(j>=h){let b=1-e.offset;d[a?"scrollLeft":"scrollTop"]=1,y.current=e.offset=-b,l=!0}else if(j<=0){let f=1+e.offset;d[a?"scrollLeft":"scrollTop"]=c,y.current=e.offset=f,l=!0}}l&&setTimeout(()=>l=!1,40)}};d.addEventListener("scroll",f,{passive:!0}),requestAnimationFrame(()=>m=!1);let g=a=>d.scrollLeft+=a.deltaY/2;return a&&d.addEventListener("wheel",g,{passive:!0}),()=>{d.removeEventListener("scroll",f),a&&d.removeEventListener("wheel",g)}}},[d,r,p,k,e,q,a,i]);let z=0;return(0,h.x)((b,a)=>{e.offset=f.MathUtils.damp(z=e.offset,y.current,m,a),e.delta=f.MathUtils.damp(e.delta,Math.abs(z-e.offset),m,a),e.delta>g&&q()}),b.createElement(j.Provider,{value:e},n)}let m=b.forwardRef(({children:a},c)=>{let d=b.useRef(null),e=k(),{width:f,height:g}=(0,h.w)(a=>a.viewport);return(0,h.x)(()=>{d.current.position.x=e.horizontal?-f*(e.pages-1)*e.offset:0,d.current.position.y=e.horizontal?0:g*(e.pages-1)*e.offset}),b.createElement("group",{ref:(0,i.Z)([c,d])},a)}),n=b.forwardRef(({children:c,style:d,...f},l)=>{let a=k(),m=b.useRef(null),{width:p,height:q}=(0,h.w)(a=>a.size),n=b.useContext(h.f),o=b.useMemo(()=>g.createRoot(a.fixed),[a.fixed]);return(0,h.x)(()=>{a.delta>a.eps&&(m.current.style.transform=`translate3d(${a.horizontal?-p*(a.pages-1)*a.offset:0}px,${a.horizontal?0:-(q*(a.pages-1)*a.offset)}px,0)`)}),o.render(b.createElement("div",(0,e.Z)({ref:(0,i.Z)([l,m]),style:{...d,position:"absolute",top:0,left:0,willChange:"transform"}},f),b.createElement(j.Provider,{value:a},b.createElement(h.f.Provider,{value:n},c)))),null}),o=b.forwardRef(({html:a,...c},d)=>b.createElement(a?n:m,(0,e.Z)({ref:d},c)))},2463:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/littlest-tokyo",function(){return c(4207)}])},2439:function(c,b,a){"use strict";a.d(b,{W:function(){return h}});var d=a(5893),e=a(949),f=a(8527);function g(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var h=function(b){var a=(0,e.If)().colorMode;return(0,d.jsx)(f.xu,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){g(d,a,c[a])})}return d}({bg:{light:"gray.50",dark:"gray.700"}[a],color:{light:"black",dark:"white"}[a]},b))}},4207:function(i,d,a){"use strict";a.r(d),a.d(d,{"default":function(){return u}});var j=a(5893),k=a(2439),l=a(1758),f=a(8626),g=a(7294),b=a(9477),m=a(4609),n=a(7462);function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class c extends b.Mesh{constructor(){super(new b.BoxGeometry(1,1,1),c.material)}}e(c,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new b.Vector3},up:{value:new b.Vector3(0,1,0)}},vertexShader:"uniform vec3 sunPosition;\nuniform float rayleigh;\nuniform float turbidity;\nuniform float mieCoefficient;\nuniform vec3 up;\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\nconst float e = 2.71828182845904523536028747135266249775724709369995957;\nconst float pi = 3.141592653589793238462643383279502884197169;\nconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\nconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\nconst float v = 4.0;\nconst vec3 K = vec3( 0.686, 0.678, 0.666 );\nconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\nconst float cutoffAngle = 1.6110731556870734;\nconst float steepness = 1.5;\nconst float EE = 1000.0;\nfloat sunIntensity( float zenithAngleCos ) {\n	zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n	return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n}\nvec3 totalMie( float T ) {\n	float c = ( 0.2 * T ) * 10E-18;\n	return 0.434 * c * MieConst;\n}\nvoid main() {\n	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n	vWorldPosition = worldPosition.xyz;\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n	gl_Position.z = gl_Position.w;\n	vSunDirection = normalize( sunPosition );\n	vSunE = sunIntensity( dot( vSunDirection, up ) );\n	vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n	float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n	vBetaR = totalRayleigh * rayleighCoefficient;\n	vBetaM = totalMie( turbidity ) * mieCoefficient;\n}",fragmentShader:"varying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\nuniform float mieDirectionalG;\nuniform vec3 up;\nconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\nconst float pi = 3.141592653589793238462643383279502884197169;\nconst float n = 1.0003;\nconst float N = 2.545E25;\nconst float rayleighZenithLength = 8.4E3;\nconst float mieZenithLength = 1.25E3;\nconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\nconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\nconst float ONE_OVER_FOURPI = 0.07957747154594767;\nfloat rayleighPhase( float cosTheta ) {\n	return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n}\nfloat hgPhase( float cosTheta, float g ) {\n	float g2 = pow( g, 2.0 );\n	float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n	return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n}\nvoid main() {\n	vec3 direction = normalize( vWorldPosition - cameraPos );\n	float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n	float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n	float sR = rayleighZenithLength * inverse;\n	float sM = mieZenithLength * inverse;\n	vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n	float cosTheta = dot( direction, vSunDirection );\n	float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n	vec3 betaRTheta = vBetaR * rPhase;\n	float mPhase = hgPhase( cosTheta, mieDirectionalG );\n	vec3 betaMTheta = vBetaM * mPhase;\n	vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n	Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n	float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\n	float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\n	vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n	vec3 L0 = vec3( 0.1 ) * Fex;\n	float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n	L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n	vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n	vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n	gl_FragColor = vec4( retColor, 1.0 );\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}"}),e(c,"material",new b.ShaderMaterial({name:"SkyShader",fragmentShader:c.SkyShader.fragmentShader,vertexShader:c.SkyShader.vertexShader,uniforms:b.UniformsUtils.clone(c.SkyShader.uniforms),side:b.BackSide,depthWrite:!1}));let o=g.forwardRef(({inclination:a=.6,azimuth:d=.1,distance:e=1e3,mieCoefficient:f=.005,mieDirectionalG:h=.8,rayleigh:i=.5,turbidity:j=10,sunPosition:k=(function(d,e,a=new b.Vector3){let c=2*Math.PI*(e-.5);return a.x=Math.cos(c),a.y=Math.sin(Math.PI*(d-.5)),a.z=Math.sin(c),a})(a,d),...l},m)=>{let o=g.useMemo(()=>new b.Vector3().setScalar(e),[e]),[p]=g.useState(()=>new c);return g.createElement("primitive",(0,n.Z)({object:p,ref:m,"material-uniforms-mieCoefficient-value":f,"material-uniforms-mieDirectionalG-value":h,"material-uniforms-rayleigh-value":i,"material-uniforms-sunPosition-value":k,"material-uniforms-turbidity-value":j,scale:o},l))});var p=a(6135),h=a(5508);function q(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function r(){return(r=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}function s(d){var e=r({},d),k=(0,l.vO)(),a=(0,f.L)("".concat(h.u,"/3d-model/LittlestTokyo-transformed.glb")),c=a.scene,n=a.nodes,i=function(a,d){let e=g.useRef(),[f]=g.useState(()=>d?d instanceof b.Object3D?{current:d}:d:e),[h]=g.useState(()=>new b.AnimationMixer(void 0)),i=g.useRef({}),[c]=g.useState(()=>{let b={};return a.forEach(a=>Object.defineProperty(b,a.name,{enumerable:!0,get(){if(f.current)return i.current[a.name]||(i.current[a.name]=h.clipAction(a,f.current))}})),{ref:f,clips:a,actions:b,names:a.map(a=>a.name),mixer:h}});return(0,m.x)((b,a)=>h.update(a)),g.useEffect(()=>{let a=f.current;return()=>{i.current={},Object.values(c.actions).forEach(b=>{a&&h.uncacheAction(b,a)})}},[a]),c}(a.animations,c).actions;return(0,g.useLayoutEffect)(function(){return Object.values(n).forEach(function(a){return a.receiveShadow=a.castShadow=!0})}),(0,g.useEffect)(function(){i["Take 001"].play().paused=!0},[i]),(0,m.x)(function(d,e){var c=i["Take 001"],a=1-k.offset;c.time=b.MathUtils.damp(c.time,c.getClip().duration/2*a,100,e),d.camera.position.set(-10*Math.sin(a),5*Math.atan(a*Math.PI*2),-10*Math.cos(a*Math.PI/3)),d.camera.lookAt(0,0,0)}),(0,j.jsx)("primitive",function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){q(d,a,c[a])})}return d}({object:c},e))}f.L.preload("".concat(h.u,"/3d-model/LittlestTokyo-transformed.glb"));var t=function(){return(0,j.jsxs)(p.Xz,{dpr:[1,2],shadows:!0,camera:{position:[0,0,10],near:.1,far:1e3},children:[(0,j.jsx)("ambientLight",{intensity:.03}),(0,j.jsx)("fog",{attach:"fog",args:["#ff5020",5,18]}),(0,j.jsx)("spotLight",{angle:.14,color:"#ffd0d0",penumbra:1,position:[25,50,-20],"shadow-mapSize":[2048,2048],"shadow-bias":-0.0001,castShadow:!0}),(0,j.jsx)(o,{sunPosition:[2,.4,10]}),(0,j.jsx)(g.Suspense,{fallback:null,children:(0,j.jsx)(l.Fq,{pages:3,children:(0,j.jsx)(s,{scale:.02,position:[0,2.5,0]})})})]})},u=function(){return(0,j.jsx)(k.W,{height:"100%",children:(0,j.jsx)(t,{})})}},5508:function(c,a,b){"use strict";b.d(a,{u:function(){return d}});var d="/showroom/r3f-playground"}},function(a){a.O(0,[737,527,135,626,774,888,179],function(){return a(a.s=2463)}),_N_E=a.O()}])