(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[278],{1758:function(e,t,n){"use strict";n.d(t,{Xs:function(){return d},Fq:function(){return u},vO:function(){return f}});var o=n(7462),i=n(2212),r=n(7294),a=n(3935),s=n(1823),c=n(5878);const l=r.createContext(null);function f(){return r.useContext(l)}function u({eps:e=1e-5,enabled:t=!0,infinite:n,horizontal:o,pages:a=1,distance:c=1,damping:f=4,children:u}){const{gl:v,size:h,invalidate:d,events:m,raycaster:p}=(0,s.Ky)(),[g]=r.useState((()=>document.createElement("div"))),[y]=r.useState((()=>document.createElement("div"))),[E]=r.useState((()=>document.createElement("div"))),w=v.domElement.parentNode,b=r.useRef(0),x=r.useMemo((()=>({el:g,eps:e,fill:y,fixed:E,horizontal:o,damping:f,offset:0,delta:0,scroll:b,pages:a,range(e,t,n=0){const o=e-n,i=o+t+2*n;return this.offset<o?0:this.offset>i?1:(this.offset-o)/(i-o)},curve(e,t,n=0){return Math.sin(this.range(e,t,n)*Math.PI)},visible(e,t,n=0){const o=e-n,i=o+t+2*n;return this.offset>=o&&this.offset<=i}})),[e,f,o,a]);r.useEffect((()=>{g.style.position="absolute",g.style.width="100%",g.style.height="100%",g.style[o?"overflowX":"overflowY"]="auto",g.style[o?"overflowY":"overflowX"]="hidden",g.style.top="0px",g.style.left="0px",E.style.position="sticky",E.style.top="0px",E.style.left="0px",E.style.width="100%",E.style.height="100%",E.style.overflow="hidden",g.appendChild(E),y.style.height=o?"100%":a*c*100+"%",y.style.width=o?a*c*100+"%":"100%",y.style.pointerEvents="none",g.appendChild(y),w.appendChild(g),g[o?"scrollLeft":"scrollTop"]=1;const e="boolean"!==typeof m.connected?m.connected:v.domElement;requestAnimationFrame((()=>null==m.connect?void 0:m.connect(g)));const t=p.computeOffsets;return p.computeOffsets=({clientX:e,clientY:t})=>({offsetX:e-w.offsetLeft,offsetY:t-w.offsetTop}),()=>{w.removeChild(g),p.computeOffsets=t,null==m.connect||m.connect(e)}}),[a,c,o,g,y,E,w]),r.useEffect((()=>{const e=h[o?"width":"height"],i=g[o?"scrollWidth":"scrollHeight"],r=i-e;let a=0,s=!0,c=!0;const l=e=>{if(t&&!c&&(d(),a=g[o?"scrollLeft":"scrollTop"],b.current=a/r,n)){if(!s)if(a>=r){const e=1-x.offset;g[o?"scrollLeft":"scrollTop"]=1,b.current=x.offset=-e,s=!0}else if(a<=0){const e=1+x.offset;g[o?"scrollLeft":"scrollTop"]=i,b.current=x.offset=e,s=!0}s&&setTimeout((()=>s=!1),40)}};g.addEventListener("scroll",l,{passive:!0}),requestAnimationFrame((()=>c=!1));const f=e=>g.scrollLeft+=e.deltaY/2;return o&&g.addEventListener("wheel",f,{passive:!0}),()=>{g.removeEventListener("scroll",l),o&&g.removeEventListener("wheel",f)}}),[g,h,n,x,d,o]);let S=0;return(0,s.xQ)(((t,n)=>{x.offset=i.MathUtils.damp(S=x.offset,b.current,f,n),x.delta=i.MathUtils.damp(x.delta,Math.abs(S-x.offset),f,n),x.delta>e&&d()})),r.createElement(l.Provider,{value:x},u)}const v=r.forwardRef((({children:e},t)=>{const n=r.useRef(null),o=f(),{width:i,height:a}=(0,s.Ky)((e=>e.viewport));return(0,s.xQ)((()=>{n.current.position.x=o.horizontal?-i*(o.pages-1)*o.offset:0,n.current.position.y=o.horizontal?0:a*(o.pages-1)*o.offset})),r.createElement("group",{ref:(0,c.Z)([t,n])},e)})),h=r.forwardRef((({children:e,style:t,...n},i)=>{const u=f(),v=r.useRef(null),{width:h,height:d}=(0,s.Ky)((e=>e.size)),m=r.useContext(s.Do);return(0,s.xQ)((()=>{u.delta>u.eps&&(v.current.style.transform=`translate3d(${u.horizontal?-h*(u.pages-1)*u.offset:0}px,${u.horizontal?0:d*(u.pages-1)*-u.offset}px,0)`)})),a.render(r.createElement("div",(0,o.Z)({ref:(0,c.Z)([i,v]),style:{...t,position:"absolute",top:0,left:0,willChange:"transform"}},n),r.createElement(l.Provider,{value:u},r.createElement(s.Do.Provider,{value:m},e))),u.fixed),null})),d=r.forwardRef((({html:e,...t},n)=>{const i=e?h:v;return r.createElement(i,(0,o.Z)({ref:n},t))}))},5010:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/littlest-tokyo",function(){return n(6966)}])},4569:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var o=n(5893),i=n(949),r=n(3236);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t=(0,i.If)().colorMode;return(0,o.jsx)(r.xu,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){a(e,t,n[t])}))}return e}({bg:{light:"gray.50",dark:"gray.700"}[t],color:{light:"black",dark:"white"}[t]},e))}},6966:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var o=n(5893),i=n(4569),r=n(1758),a=n(8626),s=n(7294),c=n(2212),l=n(1823);var f=n(7462);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends c.Mesh{constructor(){super(new c.BoxGeometry(1,1,1),v.material)}}function h(e,t,n=new c.Vector3){const o=Math.PI*(e-.5),i=2*Math.PI*(t-.5);return n.x=Math.cos(i),n.y=Math.sin(o),n.z=Math.sin(i),n}u(v,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new c.Vector3},up:{value:new c.Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( direction, vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join("\n")}),u(v,"material",new c.ShaderMaterial({name:"SkyShader",fragmentShader:v.SkyShader.fragmentShader,vertexShader:v.SkyShader.vertexShader,uniforms:c.UniformsUtils.clone(v.SkyShader.uniforms),side:c.BackSide,depthWrite:!1}));const d=s.forwardRef((({inclination:e=0,azimuth:t=.25,distance:n=100,mieCoefficient:o=.005,mieDirectionalG:i=.8,rayleigh:r=1,turbidity:a=2,sunPosition:l=h(e,t),...u},d)=>{const m=s.useMemo((()=>(new c.Vector3).setScalar(n)),[n]),[p]=s.useState((()=>new v));return s.createElement("primitive",(0,f.Z)({dispose:void 0,object:p,ref:d,"material-uniforms-mieCoefficient-value":o,"material-uniforms-mieDirectionalG-value":i,"material-uniforms-rayleigh-value":r,"material-uniforms-sunPosition-value":l,"material-uniforms-turbidity-value":a,scale:m},u))}));var m=n(2228);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function y(e){var t=g({},e),n=(0,r.vO)(),i=(0,a.L)("".concat(m.u,"/3d-model/LittlestTokyo-transformed.glb")),f=i.scene,u=i.nodes,v=function(e,t){const n=s.useRef(),[o]=s.useState((()=>t?t instanceof c.Object3D?{current:t}:t:n)),[i]=s.useState((()=>new c.AnimationMixer(void 0))),r=s.useRef({}),[a]=s.useState((()=>{const t={};return e.forEach((e=>Object.defineProperty(t,e.name,{enumerable:!0,get(){if(o.current)return r.current[e.name]||(r.current[e.name]=i.clipAction(e,o.current))}}))),{ref:o,clips:e,actions:t,names:e.map((e=>e.name)),mixer:i}}));return(0,l.xQ)(((e,t)=>i.update(t))),s.useEffect((()=>{const e=o.current;return()=>{r.current={},Object.values(a.actions).forEach((t=>{e&&i.uncacheAction(t,e)}))}}),[e]),a}(i.animations,f).actions;return(0,s.useLayoutEffect)((function(){return Object.values(u).forEach((function(e){return e.receiveShadow=e.castShadow=!0}))})),(0,s.useEffect)((function(){v["Take 001"].play().paused=!0}),[v]),(0,l.xQ)((function(e,t){var o=v["Take 001"],i=1-n.offset;o.time=c.MathUtils.damp(o.time,o.getClip().duration/2*i,100,t),e.camera.position.set(-10*Math.sin(i),5*Math.atan(i*Math.PI*2),-10*Math.cos(i*Math.PI/3)),e.camera.lookAt(0,0,0)})),(0,o.jsx)("primitive",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){p(e,t,n[t])}))}return e}({object:f},t))}a.L.preload("".concat(m.u,"/3d-model/LittlestTokyo-transformed.glb"));var E=function(){return(0,o.jsxs)(l.Xz,{dpr:[1,2],shadows:!0,camera:{position:[0,0,10],near:.1,far:1e3},children:[(0,o.jsx)("ambientLight",{intensity:.03}),(0,o.jsx)("fog",{attach:"fog",args:["#ff5020",5,18]}),(0,o.jsx)("spotLight",{angle:.14,color:"#ffd0d0",penumbra:1,position:[25,50,-20],"shadow-mapSize":[2048,2048],"shadow-bias":-1e-4,castShadow:!0}),(0,o.jsx)(d,{sunPosition:[2,.4,10]}),(0,o.jsx)(s.Suspense,{fallback:null,children:(0,o.jsx)(r.Fq,{pages:3,children:(0,o.jsx)(y,{scale:.02,position:[0,2.5,0]})})})]})},w=function(){return(0,o.jsx)(i.W,{height:"100%",children:(0,o.jsx)(E,{})})}},2228:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var o="/showroom/r3f-playground"}},function(e){e.O(0,[737,236,823,626,774,888,179],(function(){return t=5010,e(e.s=t);var t}));var t=e.O();_N_E=t}]);