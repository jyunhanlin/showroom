(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{7756:function(e,t,r){"use strict";r.d(t,{j:function(){return u}});var n=r(1667),i=r(5754),a=r(207),s=r(6227);let o={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},l={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},u=i.forwardRef(({scale:e=10,frames:t=1/0,opacity:r=1,width:u=1,height:c=1,blur:h=1,near:d=0,far:f=10,resolution:p=512,smooth:v=!0,color:m="#000000",depthWrite:g=!1,renderOrder:y,...w},b)=>{let _,S;let x=i.useRef(null),k=(0,s.z)(e=>e.scene),E=(0,s.z)(e=>e.gl),A=i.useRef(null);u*=Array.isArray(e)?e[0]:e||1,c*=Array.isArray(e)?e[1]:e||1;let[P,M,C,U,T,D,I]=i.useMemo(()=>{let e=new a.WebGLRenderTarget(p,p),t=new a.WebGLRenderTarget(p,p);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;let r=new a.PlaneGeometry(u,c).rotateX(Math.PI/2),n=new a.Mesh(r),i=new a.MeshDepthMaterial;i.depthTest=i.depthWrite=!1,i.onBeforeCompile=e=>{e.uniforms={...e.uniforms,ucolor:{value:new a.Color(m)}},e.fragmentShader=e.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};let s=new a.ShaderMaterial(o),h=new a.ShaderMaterial(l);return h.depthTest=s.depthTest=!1,[e,r,i,n,s,h,t]},[p,u,c,e,m]),O=e=>{U.visible=!0,U.material=T,T.uniforms.tDiffuse.value=P.texture,T.uniforms.h.value=1*e/256,E.setRenderTarget(I),E.render(U,A.current),U.material=D,D.uniforms.tDiffuse.value=I.texture,D.uniforms.v.value=1*e/256,E.setRenderTarget(P),E.render(U,A.current),U.visible=!1},R=0;return(0,s.A)(()=>{A.current&&(t===1/0||R<t)&&(R++,_=k.background,S=k.overrideMaterial,x.current.visible=!1,k.background=null,k.overrideMaterial=C,E.setRenderTarget(P),E.render(k,A.current),O(h),v&&O(.4*h),E.setRenderTarget(null),x.current.visible=!0,k.overrideMaterial=S,k.background=_)}),i.useImperativeHandle(b,()=>x.current,[]),i.createElement("group",(0,n.Z)({"rotation-x":Math.PI/2},w,{ref:x}),i.createElement("mesh",{renderOrder:y,geometry:M,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},i.createElement("meshBasicMaterial",{transparent:!0,map:P.texture,opacity:r,depthWrite:g})),i.createElement("orthographicCamera",{ref:A,args:[-u/2,u/2,c/2,-c/2,d,f]}))})},1970:function(e,t,r){"use strict";r.d(t,{qA:function(){return eu}});var n=r(1667),i=r(5754),a=r(6227),s=r(207);let o=e=>e&&e.isCubeTexture;class l extends s.Mesh{constructor(e,t){var r,n;let i=o(e),a=null!=(n=i?null==(r=e.image[0])?void 0:r.width:e.image.width)?n:1024,l=Math.floor(Math.log2(a/4)),u=Math.pow(2,l),c=[i?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/(3*Math.max(u,112))}`,`#define CUBEUV_TEXEL_HEIGHT ${1/(4*u)}`,`#define CUBEUV_MAX_MIP ${l}.0`],h=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,d=c.join("\n")+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,f={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}},p=new s.IcosahedronGeometry(1,16),v=new s.ShaderMaterial({uniforms:f,fragmentShader:d,vertexShader:h,side:s.DoubleSide});super(p,v)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class u extends s.DataTextureLoader{constructor(e){super(e),this.type=s.HalfFloatType}parse(e){let t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return -1},r=function(e,t,r){t=t||1024;let n=e.pos,i=-1,a=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));for(;0>(i=o.indexOf("\n"))&&a<t&&n<e.byteLength;)s+=o,a+=o.length,n+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return -1<i&&(!1!==r&&(e.pos+=a+i+1),s+o.slice(0,i))},n=new Uint8Array(e);n.pos=0;let i=function(e){let n,i;let a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(n=r(e)))return t(1,"no header found");if(!(i=n.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=i[1],u.string+=n+"\n";!1!==(n=r(e));){if(u.string+=n+"\n","#"===n.charAt(0)){u.comments+=n+"\n";continue}if((i=n.match(a))&&(u.gamma=parseFloat(i[1])),(i=n.match(s))&&(u.exposure=parseFloat(i[1])),(i=n.match(o))&&(u.valid|=2,u.format=i[1]),(i=n.match(l))&&(u.valid|=4,u.height=parseInt(i[1],10),u.width=parseInt(i[2],10)),2&u.valid&&4&u.valid)break}return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(n);if(-1!==i){let e=i.width,r=i.height,a=function(e,r,n){if(r<8||r>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(r!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");let i=new Uint8Array(4*r*n);if(!i.length)return t(4,"unable to allocate buffer space");let a=0,s=0,o=4*r,l=new Uint8Array(4),u=new Uint8Array(o),c=n;for(;c>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(l[0]=e[s++],l[1]=e[s++],l[2]=e[s++],l[3]=e[s++],2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=r)return t(3,"bad rgbe scanline format");let n=0,h;for(;n<o&&s<e.byteLength;){h=e[s++];let r=h>128;if(r&&(h-=128),0===h||n+h>o)return t(3,"bad scanline data");if(r){let t=e[s++];for(let e=0;e<h;e++)u[n++]=t}else u.set(e.subarray(s,s+h),n),n+=h,s+=h}for(let e=0;e<r;e++){let t=0;i[a]=u[e+t],t+=r,i[a+1]=u[e+t],t+=r,i[a+2]=u[e+t],t+=r,i[a+3]=u[e+t],a+=4}c--}return i}(n.subarray(n.pos),e,r);if(-1!==a){let t,n,o;switch(this.type){case s.FloatType:o=a.length/4;let l=new Float32Array(4*o);for(let e=0;e<o;e++)!function(e,t,r,n){let i=e[t+3],a=Math.pow(2,i-128)/255;r[n+0]=e[t+0]*a,r[n+1]=e[t+1]*a,r[n+2]=e[t+2]*a,r[n+3]=1}(a,4*e,l,4*e);t=l,n=s.FloatType;break;case s.HalfFloatType:o=a.length/4;let u=new Uint16Array(4*o);for(let e=0;e<o;e++)!function(e,t,r,n){let i=e[t+3],a=Math.pow(2,i-128)/255;r[n+0]=s.DataUtils.toHalfFloat(Math.min(e[t+0]*a,65504)),r[n+1]=s.DataUtils.toHalfFloat(Math.min(e[t+1]*a,65504)),r[n+2]=s.DataUtils.toHalfFloat(Math.min(e[t+2]*a,65504)),r[n+3]=s.DataUtils.toHalfFloat(1)}(a,4*e,u,4*e);t=u,n=s.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:r,data:t,header:i.string,gamma:i.gamma,exposure:i.exposure,type:n}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,n){return super.load(e,function(e,r){switch(e.type){case s.FloatType:case s.HalfFloatType:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=s.LinearFilter,e.magFilter=s.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)},r,n)}}var c={},h=Uint8Array,d=Uint16Array,f=Uint32Array,p=new h([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),v=new h([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),m=new h([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=function(e,t){for(var r=new d(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new f(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return[r,i]},y=g(p,2),w=y[0],b=y[1];w[28]=258,b[258]=28;for(var _=g(v,0),S=_[0],x=_[1],k=new d(32768),E=0;E<32768;++E){var A=(43690&E)>>>1|(21845&E)<<1;A=(61680&(A=(52428&A)>>>2|(13107&A)<<2))>>>4|(3855&A)<<4,k[E]=((65280&A)>>>8|(255&A)<<8)>>>1}for(var P=function(e,t,r){for(var n,i=e.length,a=0,s=new d(t);a<i;++a)++s[e[a]-1];var o=new d(t);for(a=0;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;if(r){n=new d(1<<t);var l=15-t;for(a=0;a<i;++a)if(e[a])for(var u=a<<4|e[a],c=t-e[a],h=o[e[a]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)n[k[h]>>>l]=u}else for(a=0,n=new d(i);a<i;++a)e[a]&&(n[a]=k[o[e[a]-1]++]>>>15-e[a]);return n},M=new h(288),E=0;E<144;++E)M[E]=8;for(var E=144;E<256;++E)M[E]=9;for(var E=256;E<280;++E)M[E]=7;for(var E=280;E<288;++E)M[E]=8;for(var C=new h(32),E=0;E<32;++E)C[E]=5;var U=P(M,9,1),T=P(C,5,1),D=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},I=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},O=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},R=function(e){return(e/8|0)+(7&e&&1)},z=function(e,t,r){(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length);var n=new(e instanceof d?d:e instanceof f?f:h)(r-t);return n.set(e.subarray(t,r)),n},F=function(e,t,r){var n=e.length;if(!n||r&&!r.l&&n<5)return t||new h(0);var i=!t||r,a=!r||r.i;r||(r={}),t||(t=new h(3*n));var s=function(e){var r=t.length;if(e>r){var n=new h(Math.max(2*r,e));n.set(t),t=n}},o=r.f||0,l=r.p||0,u=r.b||0,c=r.l,d=r.d,f=r.m,g=r.n,y=8*n;do{if(!c){r.f=o=I(e,l,1);var b=I(e,l+1,3);if(l+=3,b){if(1==b)c=U,d=T,f=9,g=5;else if(2==b){var _=I(e,l,31)+257,x=I(e,l+10,15)+4,k=_+I(e,l+5,31)+1;l+=14;for(var E=new h(k),A=new h(19),M=0;M<x;++M)A[m[M]]=I(e,l+3*M,7);l+=3*x;for(var C=D(A),F=(1<<C)-1,L=P(A,C,1),M=0;M<k;){var V=L[I(e,l,F)];l+=15&V;var j=V>>>4;if(j<16)E[M++]=j;else{var B=0,N=0;for(16==j?(N=3+I(e,l,3),l+=2,B=E[M-1]):17==j?(N=3+I(e,l,7),l+=3):18==j&&(N=11+I(e,l,127),l+=7);N--;)E[M++]=B}}var q=E.subarray(0,_),H=E.subarray(_);f=D(q),g=D(H),c=P(q,f,1),d=P(H,g,1)}else throw"invalid block type"}else{var j=R(l)+4,$=e[j-4]|e[j-3]<<8,W=j+$;if(W>n){if(a)throw"unexpected EOF";break}i&&s(u+$),t.set(e.subarray(j,W),u),r.b=u+=$,r.p=l=8*W;continue}if(l>y){if(a)throw"unexpected EOF";break}}i&&s(u+131072);for(var X=(1<<f)-1,G=(1<<g)-1,Z=l;;Z=l){var B=c[O(e,l)&X],K=B>>>4;if((l+=15&B)>y){if(a)throw"unexpected EOF";break}if(!B)throw"invalid length/literal";if(K<256)t[u++]=K;else if(256==K){Z=l,c=null;break}else{var Q=K-254;if(K>264){var M=K-257,Y=p[M];Q=I(e,l,(1<<Y)-1)+w[M],l+=Y}var J=d[O(e,l)&G],ee=J>>>4;if(!J)throw"invalid distance";l+=15&J;var H=S[ee];if(ee>3){var Y=v[ee];H+=O(e,l)&(1<<Y)-1,l+=Y}if(l>y){if(a)throw"unexpected EOF";break}i&&s(u+131072);for(var et=u+Q;u<et;u+=4)t[u]=t[u-H],t[u+1]=t[u+1-H],t[u+2]=t[u+2-H],t[u+3]=t[u+3-H];u=et}}r.l=c,r.p=Z,r.b=u,c&&(o=1,r.m=f,r.d=d,r.n=g)}while(!o);return u==t.length?t:z(t,0,u)},L=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8},V=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},j=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,a=r.slice();if(!i)return[X,0];if(1==i){var s=new h(r[0].s+1);return s[r[0].s]=1,[s,1]}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,c=1,f=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};c!=i-1;)o=r[r[u].f<r[f].f?u++:f++],l=r[u!=c&&r[u].f<r[f].f?u++:f++],r[c++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,n=1;n<i;++n)a[n].s>p&&(p=a[n].s);var v=new d(p+1),m=B(r[c-1],v,0);if(m>t){var n=0,g=0,y=m-t,w=1<<y;for(a.sort(function(e,t){return v[t.s]-v[e.s]||e.f-t.f});n<i;++n){var b=a[n].s;if(v[b]>t)g+=w-(1<<m-v[b]),v[b]=t;else break}for(g>>>=y;g>0;){var _=a[n].s;v[_]<t?g-=1<<t-v[_]++-1:++n}for(;n>=0&&g;--n){var S=a[n].s;v[S]==t&&(--v[S],++g)}m=t}return[new h(v),m]},B=function(e,t,r){return -1==e.s?Math.max(B(e.l,t,r+1),B(e.r,t,r+1)):t[e.s]=r},N=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new d(++t),n=0,i=e[0],a=1,s=function(e){r[n++]=e},o=1;o<=t;++o)if(e[o]==i&&o!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[o]}return[r.subarray(0,n),t]},q=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},H=function(e,t,r){var n=r.length,i=R(t+2);e[i]=255&n,e[i+1]=n>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<n;++a)e[i+a+4]=r[a];return(i+4+n)*8},$=function(e,t,r,n,i,a,s,o,l,u,c){L(t,c++,r),++i[256];for(var h,f,g,y,w=j(i,15),b=w[0],_=w[1],S=j(a,15),x=S[0],k=S[1],E=N(b),A=E[0],U=E[1],T=N(x),D=T[0],I=T[1],O=new d(19),R=0;R<A.length;++R)O[31&A[R]]++;for(var R=0;R<D.length;++R)O[31&D[R]]++;for(var z=j(O,7),F=z[0],B=z[1],$=19;$>4&&!F[m[$-1]];--$);var W=u+5<<3,X=q(i,M)+q(a,C)+s,G=q(i,b)+q(a,x)+s+14+3*$+q(O,F)+(2*O[16]+3*O[17]+7*O[18]);if(W<=X&&W<=G)return H(t,c,e.subarray(l,l+u));if(L(t,c,1+(G<X)),c+=2,G<X){h=P(b,_,0),f=b,g=P(x,k,0),y=x;var Z=P(F,B,0);L(t,c,U-257),L(t,c+5,I-1),L(t,c+10,$-4),c+=14;for(var R=0;R<$;++R)L(t,c+3*R,F[m[R]]);c+=3*$;for(var K=[A,D],Q=0;Q<2;++Q)for(var Y=K[Q],R=0;R<Y.length;++R){var J=31&Y[R];L(t,c,Z[J]),c+=F[J],J>15&&(L(t,c,Y[R]>>>5&127),c+=Y[R]>>>12)}}else h=null,f=M,g=null,y=C;for(var R=0;R<o;++R)if(n[R]>255){var J=n[R]>>>18&31;V(t,c,h[J+257]),c+=f[J+257],J>7&&(L(t,c,n[R]>>>23&31),c+=p[J]);var ee=31&n[R];V(t,c,g[ee]),c+=y[ee],ee>3&&(V(t,c,n[R]>>>5&8191),c+=v[ee])}else V(t,c,h[n[R]]),c+=f[n[R]];return V(t,c,h[256]),c+f[256]},W=new f([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),X=new h(0),G=function(e){if((15&e[0])!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function Z(e,t){return F((G(e),e.subarray(2,-4)),t)}var K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(X,{stream:!0})}catch(e){}let Q="colorSpace"in new s.Texture;class Y extends s.DataTextureLoader{constructor(e){super(e),this.type=s.HalfFloatType}parse(e){let t={l:0,c:0,lc:0};function r(e,r,n,i,a){for(;n<e;)r=r<<8|A(i,a),n+=8;n-=e,t.l=r>>n&(1<<e)-1,t.c=r,t.lc=n}let n=Array(59),i={c:0,lc:0};function a(e,t,r,n){e=e<<8|A(r,n),t+=8,i.c=e,i.lc=t}let o={c:0,lc:0};function l(e,t,r,n,s,l,u,c,h,d){if(e==t){n<8&&(a(r,n,s,u),r=i.c,n=i.lc);var f=r>>(n-=8),f=new Uint8Array([f])[0];if(h.value+f>d)return!1;for(var p=c[h.value-1];f-- >0;)c[h.value++]=p}else{if(!(h.value<d))return!1;c[h.value++]=e}o.c=r,o.lc=n}function u(e){var t=65535&e;return t>32767?t-65536:t}let c={a:0,b:0};function h(e,t){var r=u(e),n=u(t),i=r+(1&n)+(n>>1);c.a=i,c.b=i-n}function d(e,t){var r=65535&t,n=(65535&e)-(r>>1)&65535;c.a=r+n-32768&65535,c.b=n}function f(e,s,u,c,h,d){var f=u.value,p=E(s,u),v=E(s,u);u.value+=4;var m=E(s,u);if(u.value+=4,p<0||p>=65537||v<0||v>=65537)throw"Something wrong with HUF_ENCSIZE";var g=Array(65537),y=Array(16384);!function(e){for(var t=0;t<16384;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(y);var w=c-(u.value-f);if(!function(e,i,a,s,o,l,u){for(var c=0,h=0;o<=l;o++){if(a.value-a.value>s)return!1;r(6,c,h,e,a);var d=t.l;if(c=t.c,h=t.lc,u[o]=d,63==d){if(a.value-a.value>s)throw"Something wrong with hufUnpackEncTable";r(8,c,h,e,a);var f=t.l+6;if(c=t.c,h=t.lc,o+f>l+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)u[o++]=0;o--}else if(d>=59){var f=d-59+2;if(o+f>l+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)u[o++]=0;o--}}!function(e){for(var t=0;t<=58;++t)n[t]=0;for(var t=0;t<65537;++t)n[e[t]]+=1;for(var r=0,t=58;t>0;--t){var i=r+n[t]>>1;n[t]=r,r=i}for(var t=0;t<65537;++t){var a=e[t];a>0&&(e[t]=a|n[a]++<<6)}}(u)}(e,0,u,w,p,v,g),m>8*(c-(u.value-f)))throw"Something wrong with hufUncompress";!function(e,t,r,n){for(;t<=r;t++){var i=e[t]>>6,a=63&e[t];if(i>>a)throw"Invalid table entry";if(a>14){var s=n[i>>a-14];if(s.len)throw"Invalid table entry";if(s.lit++,s.p){var o=s.p;s.p=Array(s.lit);for(var l=0;l<s.lit-1;++l)s.p[l]=o[l]}else s.p=[,];s.p[s.lit-1]=t}else if(a)for(var u=0,l=1<<14-a;l>0;l--){var s=n[(i<<14-a)+u];if(s.len||s.p)throw"Invalid table entry";s.len=a,s.lit=t,u++}}}(g,p,v,y),function(e,t,r,n,s,u,c,h,d,f){for(var p=0,v=0,m=Math.trunc(s.value+(u+7)/8);s.value<m;)for(a(p,v,r,s),p=i.c,v=i.lc;v>=14;){var g=t[p>>v-14&16383];if(g.len)v-=g.len,l(g.lit,c,p,v,r,n,s,d,f,h),p=o.c,v=o.lc;else{if(!g.p)throw"hufDecode issues";for(y=0;y<g.lit;y++){for(var y,w=63&e[g.p[y]];v<w&&s.value<m;)a(p,v,r,s),p=i.c,v=i.lc;if(v>=w&&e[g.p[y]]>>6==(p>>v-w&(1<<w)-1)){v-=w,l(g.p[y],c,p,v,r,n,s,d,f,h),p=o.c,v=o.lc;break}}if(y==g.lit)throw"hufDecode issues"}}var b=8-u&7;for(p>>=b,v-=b;v>0;){var g=t[p<<14-v&16383];if(g.len)v-=g.len,l(g.lit,c,p,v,r,n,s,d,f,h),p=o.c,v=o.lc;else throw"hufDecode issues"}}(g,y,e,s,u,m,v,d,h,{value:0})}function p(e){for(var t=1;t<e.length;t++){var r=e[t-1]+e[t]-128;e[t]=r}}function v(e,t){for(var r=0,n=Math.floor((e.length+1)/2),i=0,a=e.length-1;!(i>a)&&(t[i++]=e[r++],!(i>a));)t[i++]=e[n++]}function m(e){for(var t=e.byteLength,r=[],n=0,i=new DataView(e);t>0;){var a=i.getInt8(n++);if(a<0){var s=-a;t-=s+1;for(var o=0;o<s;o++)r.push(i.getUint8(n++))}else{var s=a;t-=2;for(var l=i.getUint8(n++),o=0;o<s+1;o++)r.push(l)}}return r}function g(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function y(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),r=new Uint8Array(m(t)),n=new Uint8Array(r.length);return p(r),v(r,n),new DataView(n.buffer)}function w(e){var t=Z(e.array.slice(e.offset.value,e.offset.value+e.size)),r=new Uint8Array(t.length);return p(t),v(t,r),new DataView(r.buffer)}function b(e){for(var t=e.viewer,r={value:e.offset.value},n=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),i=new Uint8Array(8192),a=0,s=Array(e.channels),o=0;o<e.channels;o++)s[o]={},s[o].start=a,s[o].end=s[o].start,s[o].nx=e.width,s[o].ny=e.lines,s[o].size=e.type,a+=s[o].nx*s[o].ny*s[o].size;var l=D(t,r),u=D(t,r);if(u>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(l<=u)for(var o=0;o<u-l+1;o++)i[o+l]=P(t,r);var p=new Uint16Array(65536),v=function(e,t){for(var r=0,n=0;n<65536;++n)(0==n||e[n>>3]&1<<(7&n))&&(t[r++]=n);for(var i=r-1;r<65536;)t[r++]=0;return i}(i,p),m=E(t,r);f(e.array,t,r,m,n,a);for(var o=0;o<e.channels;++o)for(var g=s[o],y=0;y<s[o].size;++y)!function(e,t,r,n,i,a,s){for(var o=s<16384,l=r>i?i:r,u=1;u<=l;)u<<=1;for(u>>=1,f=u,u>>=1;u>=1;){for(var f,p,v,m,g,y=0,w=0+a*(i-f),b=a*u,_=a*f,S=n*u,x=n*f;y<=w;y+=_){for(var k=y,E=y+n*(r-f);k<=E;k+=x){var A=k+S,P=k+b,M=P+S;o?(h(e[k+t],e[P+t]),p=c.a,m=c.b,h(e[A+t],e[M+t]),v=c.a,g=c.b,h(p,v),e[k+t]=c.a,e[A+t]=c.b,h(m,g)):(d(e[k+t],e[P+t]),p=c.a,m=c.b,d(e[A+t],e[M+t]),v=c.a,g=c.b,d(p,v),e[k+t]=c.a,e[A+t]=c.b,d(m,g)),e[P+t]=c.a,e[M+t]=c.b}if(r&u){var P=k+b;o?h(e[k+t],e[P+t]):d(e[k+t],e[P+t]),p=c.a,e[P+t]=c.b,e[k+t]=p}}if(i&u)for(var k=y,E=y+n*(r-f);k<=E;k+=x){var A=k+S;o?h(e[k+t],e[A+t]):d(e[k+t],e[A+t]),p=c.a,e[A+t]=c.b,e[k+t]=p}f=u,u>>=1}}(n,g.start+y,g.nx,g.size,g.ny,g.nx*g.size,v);!function(e,t,r){for(var n=0;n<r;++n)t[n]=e[t[n]]}(p,n,a);for(var w=0,b=new Uint8Array(n.buffer.byteLength),_=0;_<e.lines;_++)for(var S=0;S<e.channels;S++){var g=s[S],x=g.nx*g.size,k=new Uint8Array(n.buffer,2*g.end,2*x);b.set(k,w),w+=2*x,g.end+=x}return new DataView(b.buffer)}function _(e){var t=Z(e.array.slice(e.offset.value,e.offset.value+e.size));let r=e.lines*e.channels*e.width,n=1==e.type?new Uint16Array(r):new Uint32Array(r),i=0,a=0,s=[,,,,];for(let r=0;r<e.lines;r++)for(let r=0;r<e.channels;r++){let r=0;switch(e.type){case 1:s[0]=i,s[1]=s[0]+e.width,i=s[1]+e.width;for(let i=0;i<e.width;++i){let e=t[s[0]++]<<8|t[s[1]++];r+=e,n[a]=r,a++}break;case 2:s[0]=i,s[1]=s[0]+e.width,s[2]=s[1]+e.width,i=s[2]+e.width;for(let i=0;i<e.width;++i){let e=t[s[0]++]<<24|t[s[1]++]<<16|t[s[2]++]<<8;r+=e,n[a]=r,a++}}}return new DataView(n.buffer)}function S(e){var t=e.viewer,r={value:e.offset.value},n=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),i={version:M(t,r),unknownUncompressedSize:M(t,r),unknownCompressedSize:M(t,r),acCompressedSize:M(t,r),dcCompressedSize:M(t,r),rleCompressedSize:M(t,r),rleUncompressedSize:M(t,r),rleRawSize:M(t,r),totalAcUncompressedCount:M(t,r),totalDcUncompressedCount:M(t,r),acCompression:M(t,r)};if(i.version<2)throw"EXRLoader.parse: "+F.compression+" version "+i.version+" is unsupported";for(var a=[],o=D(t,r)-2;o>0;){var l=x(t.buffer,r),u=P(t,r),c=u>>2&3,h=(u>>4)-1,d=new Int8Array([h])[0],p=P(t,r);a.push({name:l,index:d,type:p,compression:c}),o-=l.length+3}for(var v=F.channels,g=Array(e.channels),y=0;y<e.channels;++y){var b=g[y]={},_=v[y];b.name=_.name,b.compression=0,b.decoded=!1,b.type=_.pixelType,b.pLinear=_.pLinear,b.width=e.width,b.height=e.lines}for(var S={idx:[,,,]},k=0;k<e.channels;++k)for(var b=g[k],y=0;y<a.length;++y){var E=a[y];b.name==E.name&&(b.compression=E.compression,E.index>=0&&(S.idx[E.index]=k),b.offset=k)}if(i.acCompressedSize>0)switch(i.acCompression){case 0:var A=new Uint16Array(i.totalAcUncompressedCount);f(e.array,t,r,i.acCompressedSize,A,i.totalAcUncompressedCount);break;case 1:var C=e.array.slice(r.value,r.value+i.totalAcUncompressedCount),U=Z(C),A=new Uint16Array(U.buffer);r.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){var I={array:e.array,offset:r,size:i.dcCompressedSize},O=new Uint16Array(w(I).buffer);r.value+=i.dcCompressedSize}if(i.rleRawSize>0){var C=e.array.slice(r.value,r.value+i.rleCompressedSize),U=Z(C),R=m(U.buffer);r.value+=i.rleCompressedSize}for(var z=0,L=Array(g.length),y=0;y<L.length;++y)L[y]=[];for(var V=0;V<e.lines;++V)for(var j=0;j<g.length;++j)L[j].push(z),z+=g[j].width*e.type*2;!function(e,t,r,n,i,a){var o=new DataView(a.buffer),l=r[e.idx[0]].width,u=r[e.idx[0]].height,c=Math.floor(l/8),h=Math.ceil(l/8),d=Math.ceil(u/8),f=l-(h-1)*8,p=u-(d-1)*8,v={value:0},m=[,,,],g=[,,,],y=[,,,],w=[,,,],b=[,,,];for(let r=0;r<3;++r)b[r]=t[e.idx[r]],m[r]=r<1?0:m[r-1]+h*d,g[r]=new Float32Array(64),y[r]=new Uint16Array(64),w[r]=new Uint16Array(64*h);for(let t=0;t<d;++t){var _,S,x=8;t==d-1&&(x=p);var k=8;for(let e=0;e<h;++e){e==h-1&&(k=f);for(let e=0;e<3;++e)y[e].fill(0),y[e][0]=i[m[e]++],function(e,t,r){for(var n,i=1;i<64;)65280==(n=t[e.value])?i=64:n>>8==255?i+=255&n:(r[i]=n,i++),e.value++}(v,n,y[e]),_=y[e],(S=g[e])[0]=T(_[0]),S[1]=T(_[1]),S[2]=T(_[5]),S[3]=T(_[6]),S[4]=T(_[14]),S[5]=T(_[15]),S[6]=T(_[27]),S[7]=T(_[28]),S[8]=T(_[2]),S[9]=T(_[4]),S[10]=T(_[7]),S[11]=T(_[13]),S[12]=T(_[16]),S[13]=T(_[26]),S[14]=T(_[29]),S[15]=T(_[42]),S[16]=T(_[3]),S[17]=T(_[8]),S[18]=T(_[12]),S[19]=T(_[17]),S[20]=T(_[25]),S[21]=T(_[30]),S[22]=T(_[41]),S[23]=T(_[43]),S[24]=T(_[9]),S[25]=T(_[11]),S[26]=T(_[18]),S[27]=T(_[24]),S[28]=T(_[31]),S[29]=T(_[40]),S[30]=T(_[44]),S[31]=T(_[53]),S[32]=T(_[10]),S[33]=T(_[19]),S[34]=T(_[23]),S[35]=T(_[32]),S[36]=T(_[39]),S[37]=T(_[45]),S[38]=T(_[52]),S[39]=T(_[54]),S[40]=T(_[20]),S[41]=T(_[22]),S[42]=T(_[33]),S[43]=T(_[38]),S[44]=T(_[46]),S[45]=T(_[51]),S[46]=T(_[55]),S[47]=T(_[60]),S[48]=T(_[21]),S[49]=T(_[34]),S[50]=T(_[37]),S[51]=T(_[47]),S[52]=T(_[50]),S[53]=T(_[56]),S[54]=T(_[59]),S[55]=T(_[61]),S[56]=T(_[35]),S[57]=T(_[36]),S[58]=T(_[48]),S[59]=T(_[49]),S[60]=T(_[57]),S[61]=T(_[58]),S[62]=T(_[62]),S[63]=T(_[63]),function(e){let t=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),n=.5*Math.cos(3*3.14159/16),i=.5*Math.cos(3*3.14159/8);for(var a=[,,,,],s=[,,,,],o=[,,,,],l=[,,,,],u=0;u<8;++u){var c=8*u;a[0]=r*e[c+2],a[1]=i*e[c+2],a[2]=r*e[c+6],a[3]=i*e[c+6],s[0]=t*e[c+1]+n*e[c+3]+.2777854612564676*e[c+5]+.09754573032714427*e[c+7],s[1]=n*e[c+1]-.09754573032714427*e[c+3]-t*e[c+5]-.2777854612564676*e[c+7],s[2]=.2777854612564676*e[c+1]-t*e[c+3]+.09754573032714427*e[c+5]+n*e[c+7],s[3]=.09754573032714427*e[c+1]-.2777854612564676*e[c+3]+n*e[c+5]-t*e[c+7],o[0]=.35355362513961314*(e[c+0]+e[c+4]),o[3]=.35355362513961314*(e[c+0]-e[c+4]),o[1]=a[0]+a[3],o[2]=a[1]-a[2],l[0]=o[0]+o[1],l[1]=o[3]+o[2],l[2]=o[3]-o[2],l[3]=o[0]-o[1],e[c+0]=l[0]+s[0],e[c+1]=l[1]+s[1],e[c+2]=l[2]+s[2],e[c+3]=l[3]+s[3],e[c+4]=l[3]-s[3],e[c+5]=l[2]-s[2],e[c+6]=l[1]-s[1],e[c+7]=l[0]-s[0]}for(var h=0;h<8;++h)a[0]=r*e[16+h],a[1]=i*e[16+h],a[2]=r*e[48+h],a[3]=i*e[48+h],s[0]=t*e[8+h]+n*e[24+h]+.2777854612564676*e[40+h]+.09754573032714427*e[56+h],s[1]=n*e[8+h]-.09754573032714427*e[24+h]-t*e[40+h]-.2777854612564676*e[56+h],s[2]=.2777854612564676*e[8+h]-t*e[24+h]+.09754573032714427*e[40+h]+n*e[56+h],s[3]=.09754573032714427*e[8+h]-.2777854612564676*e[24+h]+n*e[40+h]-t*e[56+h],o[0]=.35355362513961314*(e[h]+e[32+h]),o[3]=.35355362513961314*(e[h]-e[32+h]),o[1]=a[0]+a[3],o[2]=a[1]-a[2],l[0]=o[0]+o[1],l[1]=o[3]+o[2],l[2]=o[3]-o[2],l[3]=o[0]-o[1],e[0+h]=l[0]+s[0],e[8+h]=l[1]+s[1],e[16+h]=l[2]+s[2],e[24+h]=l[3]+s[3],e[32+h]=l[3]-s[3],e[40+h]=l[2]-s[2],e[48+h]=l[1]-s[1],e[56+h]=l[0]-s[0]}(g[e]);!function(e){for(var t=0;t<64;++t){var r=e[0][t],n=e[1][t],i=e[2][t];e[0][t]=r+1.5747*i,e[1][t]=r-.1873*n-.4682*i,e[2][t]=r+1.8556*n}}(g);for(let t=0;t<3;++t)!function(e,t,r){for(var n,i=0;i<64;++i)t[r+i]=s.DataUtils.toHalfFloat((n=e[i])<=1?Math.sign(n)*Math.pow(Math.abs(n),2.2):Math.sign(n)*Math.pow(9.025013291561939,Math.abs(n)-1))}(g[t],w[t],64*e)}let a=0;for(let n=0;n<3;++n){let i=r[e.idx[n]].type;for(let e=8*t;e<8*t+x;++e){a=b[n][e];for(let t=0;t<c;++t){let r=64*t+(7&e)*8;o.setUint16(a+0*i,w[n][r+0],!0),o.setUint16(a+2*i,w[n][r+1],!0),o.setUint16(a+4*i,w[n][r+2],!0),o.setUint16(a+6*i,w[n][r+3],!0),o.setUint16(a+8*i,w[n][r+4],!0),o.setUint16(a+10*i,w[n][r+5],!0),o.setUint16(a+12*i,w[n][r+6],!0),o.setUint16(a+14*i,w[n][r+7],!0),a+=16*i}}if(c!=h)for(let e=8*t;e<8*t+x;++e){let t=b[n][e]+8*c*2*i,r=64*c+(7&e)*8;for(let e=0;e<k;++e)o.setUint16(t+2*e*i,w[n][r+e],!0)}}}for(var E=new Uint16Array(l),o=new DataView(a.buffer),A=0;A<3;++A){r[e.idx[A]].decoded=!0;var P=r[e.idx[A]].type;if(2==r[A].type)for(var M=0;M<u;++M){let e=b[A][M];for(var C=0;C<l;++C)E[C]=o.getUint16(e+2*C*P,!0);for(var C=0;C<l;++C)o.setFloat32(e+2*C*P,T(E[C]),!0)}}}(S,L,g,A,O,n);for(var y=0;y<g.length;++y){var b=g[y];if(!b.decoded){if(2===b.compression)for(var B=0,N=0,V=0;V<e.lines;++V){for(var q=L[y][B],H=0;H<b.width;++H){for(var $=0;$<2*b.type;++$)n[q++]=R[N+$*b.width*b.height];N++}B++}else throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(n.buffer)}function x(e,t){for(var r=new Uint8Array(e),n=0;0!=r[t.value+n];)n+=1;var i=new TextDecoder().decode(r.slice(t.value,t.value+n));return t.value=t.value+n+1,i}function k(e,t){var r=e.getInt32(t.value,!0);return t.value=t.value+4,r}function E(e,t){var r=e.getUint32(t.value,!0);return t.value=t.value+4,r}function A(e,t){var r=e[t.value];return t.value=t.value+1,r}function P(e,t){var r=e.getUint8(t.value);return t.value=t.value+1,r}let M=function(e,t){let r;return r="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,r};function C(e,t){var r=e.getFloat32(t.value,!0);return t.value+=4,r}function U(e,t){return s.DataUtils.toHalfFloat(C(e,t))}function T(e){var t=(31744&e)>>10,r=1023&e;return(e>>15?-1:1)*(t?31===t?r?NaN:1/0:Math.pow(2,t-15)*(1+r/1024):6103515625e-14*(r/1024))}function D(e,t){var r=e.getUint16(t.value,!0);return t.value+=2,r}function I(e,t){return T(D(e,t))}let O=new DataView(e),R=new Uint8Array(e),z={value:0},F=function(e,t,r){let n={};if(20000630!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";n.version=e.getUint8(4);let i=e.getUint8(5);n.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},r.value=8;for(var a=!0;a;){var s=x(t,r);if(0==s)a=!1;else{var o=x(t,r),l=E(e,r),u=function(e,t,r,n,i){var a,s,o,l,u,c,h;if("string"===n||"stringvector"===n||"iccProfile"===n)return a=new TextDecoder().decode(new Uint8Array(t).slice(r.value,r.value+i)),r.value=r.value+i,a;if("chlist"===n)return function(e,t,r,n){for(var i=r.value,a=[];r.value<i+n-1;){var s=x(t,r),o=k(e,r),l=P(e,r);r.value+=3;var u=k(e,r),c=k(e,r);a.push({name:s,pixelType:o,pLinear:l,xSampling:u,ySampling:c})}return r.value+=1,a}(e,t,r,i);if("chromaticities"===n)return s=C(e,r),o=C(e,r),l=C(e,r),u=C(e,r),c=C(e,r),{redX:s,redY:o,greenX:l,greenY:u,blueX:c,blueY:C(e,r),whiteX:C(e,r),whiteY:C(e,r)};if("compression"===n)return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][P(e,r)];if("box2i"===n)return h=E(e,r),{xMin:h,yMin:E(e,r),xMax:E(e,r),yMax:E(e,r)};if("lineOrder"===n)return["INCREASING_Y"][P(e,r)];if("float"===n)return C(e,r);else if("v2f"===n)return[C(e,r),C(e,r)];else if("v3f"===n)return[C(e,r),C(e,r),C(e,r)];else if("int"===n)return k(e,r);else if("rational"===n)return[k(e,r),E(e,r)];else if("timecode"===n)return[E(e,r),E(e,r)];else return"preview"===n?(r.value+=i,"skipped"):void(r.value+=i)}(e,t,r,o,l);void 0===u?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${o}'.`):n[s]=u}}if(0!=i)throw console.error("EXRHeader:",n),"THREE.EXRLoader: provided file is currently unsupported.";return n}(O,e,z),L=function(e,t,r,n,i){let a={size:0,viewer:t,array:r,offset:n,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[Q?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":a.lines=1,a.uncompress=g;break;case"RLE_COMPRESSION":a.lines=1,a.uncompress=y;break;case"ZIPS_COMPRESSION":a.lines=1,a.uncompress=w;break;case"ZIP_COMPRESSION":a.lines=16,a.uncompress=w;break;case"PIZ_COMPRESSION":a.lines=32,a.uncompress=b;break;case"PXR24_COMPRESSION":a.lines=16,a.uncompress=_;break;case"DWAA_COMPRESSION":a.lines=32,a.uncompress=S;break;case"DWAB_COMPRESSION":a.lines=256,a.uncompress=S;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(a.scanlineBlockSize=a.lines,1==a.type)switch(i){case s.FloatType:a.getter=I,a.inputSize=2;break;case s.HalfFloatType:a.getter=D,a.inputSize=2}else if(2==a.type)switch(i){case s.FloatType:a.getter=C,a.inputSize=4;break;case s.HalfFloatType:a.getter=U,a.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+a.type+" for "+e.compression+".";a.blockCount=(e.dataWindow.yMax+1)/a.scanlineBlockSize;for(var o=0;o<a.blockCount;o++)M(t,n);a.outputChannels=3==a.channels?4:a.channels;let l=a.width*a.height*a.outputChannels;switch(i){case s.FloatType:a.byteArray=new Float32Array(l),a.channels<a.outputChannels&&a.byteArray.fill(1,0,l);break;case s.HalfFloatType:a.byteArray=new Uint16Array(l),a.channels<a.outputChannels&&a.byteArray.fill(15360,0,l);break;default:console.error("THREE.EXRLoader: unsupported type: ",i)}return a.bytesPerLine=a.width*a.inputSize*a.channels,4==a.outputChannels?a.format=s.RGBAFormat:a.format=s.RedFormat,Q?a.colorSpace="srgb-linear":a.encoding=3e3,a}(F,O,R,z,this.type),V={value:0},j={R:0,G:1,B:2,A:3,Y:0};for(let e=0;e<L.height/L.scanlineBlockSize;e++){let t=E(O,z);L.size=E(O,z),L.lines=t+L.scanlineBlockSize>L.height?L.height-t:L.scanlineBlockSize;let r=L.size<L.lines*L.bytesPerLine,n=r?L.uncompress(L):g(L);z.value+=L.size;for(let t=0;t<L.scanlineBlockSize;t++){let r=t+e*L.scanlineBlockSize;if(r>=L.height)break;for(let e=0;e<L.channels;e++){let i=j[F.channels[e].name];for(let a=0;a<L.width;a++){V.value=(t*(L.channels*L.width)+e*L.width+a)*L.inputSize;let s=(L.height-1-r)*(L.width*L.outputChannels)+a*L.outputChannels+i;L.byteArray[s]=L.getter(n,V)}}}}return{header:F,width:L.width,height:L.height,data:L.byteArray,format:L.format,[Q?"colorSpace":"encoding"]:L[Q?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,n){return super.load(e,function(e,r){Q?e.colorSpace=r.colorSpace:e.encoding=r.encoding,e.minFilter=s.LinearFilter,e.magFilter=s.LinearFilter,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,r)},r,n)}}let J={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},ee=e=>Array.isArray(e);function et({files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:r,encoding:n,extensions:i}={}){var o;let l;let c=null,h=!1;if(r){if(!(r in J))throw Error("Preset must be one of: "+Object.keys(J).join(", "));e=J[r],t="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/"}if(h=ee(e),l=ee(e)?"cube":e.startsWith("data:application/exr")?"exr":e.startsWith("data:application/hdr")?"hdr":null==(o=e.split(".").pop())?void 0:o.toLowerCase(),!(c=h?s.CubeTextureLoader:"hdr"===l?u:"exr"===l?Y:null))throw Error("useEnvironment: Unrecognized file extension: "+e);let d=(0,a.D)(c,h?[e]:e,e=>{null==e.setPath||e.setPath(t),i&&i(e)}),f=h?d[0]:d;return f.mapping=h?s.CubeReflectionMapping:s.EquirectangularReflectionMapping,"colorSpace"in f?f.colorSpace=(null!=n?n:h)?"srgb":"srgb-linear":f.encoding=(null!=n?n:h)?3001:3e3,f}let er=e=>e.current&&e.current.isScene,en=e=>er(e)?e.current:e;function ei(e,t,r,n,i=0){let a=en(t||r),s=a.background,o=a.environment,l=a.backgroundBlurriness||0;return"only"!==e&&(a.environment=n),e&&(a.background=n),e&&void 0!==a.backgroundBlurriness&&(a.backgroundBlurriness=i),()=>{"only"!==e&&(a.environment=o),e&&(a.background=s),e&&void 0!==a.backgroundBlurriness&&(a.backgroundBlurriness=l)}}function ea({scene:e,background:t=!1,blur:r,map:n}){let s=(0,a.z)(e=>e.scene);return i.useLayoutEffect(()=>{if(n)return ei(t,e,s,n,r)},[s,e,n,t,r]),null}function es({background:e=!1,scene:t,blur:r,...n}){let s=et(n),o=(0,a.z)(e=>e.scene);return i.useLayoutEffect(()=>ei(e,t,o,s,r),[s,e,t,o,r]),null}function eo({children:e,near:t=1,far:r=1e3,resolution:n=256,frames:o=1,map:l,background:u=!1,blur:c,scene:h,files:d,path:f,preset:p,extensions:v}){let m=(0,a.z)(e=>e.gl),g=(0,a.z)(e=>e.scene),y=i.useRef(null),[w]=i.useState(()=>new s.Scene),b=i.useMemo(()=>{let e=new s.WebGLCubeRenderTarget(n);return e.texture.type=s.HalfFloatType,e},[n]);i.useLayoutEffect(()=>(1===o&&y.current.update(m,w),ei(u,h,g,b.texture,c)),[e,w,b.texture,h,g,u,o,m]);let _=1;return(0,a.A)(()=>{(o===1/0||_<o)&&(y.current.update(m,w),_++)}),i.createElement(i.Fragment,null,(0,a.g)(i.createElement(i.Fragment,null,e,i.createElement("cubeCamera",{ref:y,args:[t,r,b]}),d||p?i.createElement(es,{background:!0,files:d,preset:p,path:f,extensions:v}):l?i.createElement(ea,{background:!0,map:l,extensions:v}):null),w))}function el(e){var t,r,s,o;let u=et(e),c=e.map||u;i.useMemo(()=>(0,a.e)({GroundProjectedEnvImpl:l}),[]);let h=i.useMemo(()=>[c],[c]),d=null==(t=e.ground)?void 0:t.height,f=null==(r=e.ground)?void 0:r.radius,p=null!==(s=null==(o=e.ground)?void 0:o.scale)&&void 0!==s?s:1e3;return i.createElement(i.Fragment,null,i.createElement(ea,(0,n.Z)({},e,{map:c})),i.createElement("groundProjectedEnvImpl",{args:h,scale:p,height:d,radius:f}))}function eu(e){return e.ground?i.createElement(el,e):e.map?i.createElement(ea,e):e.children?i.createElement(eo,e):i.createElement(es,e)}},4959:function(e,t,r){"use strict";r.d(t,{useDrag:function(){return W}});let n={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function i(e,t,r){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*r):e*t*r/(t+r*e)}function a(e,t,r,n=.15){return 0===n?Math.max(t,Math.min(e,r)):e<t?-i(t-e,r-t,n)+t:e>r?+i(e-r,r-t,n)+r:e}function s(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let u={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function c(e){return e?e[0].toUpperCase()+e.slice(1):""}let h=["enter","leave"],d=["gotpointercapture","lostpointercapture"];function f(e){return"touches"in e}function p(e){return f(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function v(e){return f(e)?("touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches)[0]:e}function m(e){let t=v(e);return f(e)?t.identifier:t.pointerId}function g(e){let t=v(e);return[t.clientX,t.clientY]}function y(e,...t){return"function"==typeof e?e(...t):e}function w(){}function b(e,t){return Object.assign({},t,e||{})}class _{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:t,ingKey:r,args:n}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=n,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?y(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){let t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(e){let t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){let{shiftKey:r,altKey:n,metaKey:i,ctrlKey:a}=e;Object.assign(t,{shiftKey:r,altKey:n,metaKey:i,ctrlKey:a})}return t}(e)),i.down=i.pressed=i.buttons%2==1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){let e=t._delta.map(Math.abs);n.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);let[o,l]=t._movement,[u,c]=r.threshold,{_step:h,values:d}=t;if(r.hasCustomTransform?(!1===h[0]&&(h[0]=Math.abs(o)>=u&&d[0]),!1===h[1]&&(h[1]=Math.abs(l)>=c&&d[1])):(!1===h[0]&&(h[0]=Math.abs(o)>=u&&Math.sign(o)*u),!1===h[1]&&(h[1]=Math.abs(l)>=c&&Math.sign(l)*c)),t.intentional=!1!==h[0]||!1!==h[1],!t.intentional)return;let f=[0,0];if(r.hasCustomTransform){let[e,t]=d;f[0]=!1!==h[0]?e-h[0]:0,f[1]=!1!==h[1]?t-h[1]:0}else f[0]=!1!==h[0]?o-h[0]:0,f[1]=!1!==h[1]?l-h[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(f);let p=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=y(r.bounds,t)),this.setup&&this.setup()),t.movement=f,this.computeOffset()));let[m,g]=t.offset,[[w,b],[_,S]]=t._bounds;t.overflow=[m<w?-1:m>b?1:0,g<_?-1:g>S?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);let x=t._active&&r.rubberband||[0,0];if(t.offset=function(e,[t,r],[n,i]){let[[s,o],[l,u]]=e;return[a(t,s,o,n),a(r,l,u,i)]}(t._bounds,t.offset,x),t.delta=n.sub(t.offset,p),this.computeMovement(),v&&(!t.last||s>32)){t.delta=n.sub(t.offset,p);let e=t.delta.map(Math.abs);n.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[e[0]/s,e[1]/s],t.timeDelta=s)}}emit(){let e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;let n=this.handler(l(l(l({},t),e),{},{[this.aliasKey]:e.values}));void 0!==n&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class S extends _{constructor(...e){super(...e),s(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=n.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=n.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let t=this.state,r=this.config;if(!t.axis&&e){let n="object"==typeof r.axisThreshold?r.axisThreshold[p(e)]:r.axisThreshold;t.axis=function([e,t],r){let n=Math.abs(e),i=Math.abs(t);return n>i&&n>r?"x":i>n&&i>r?"y":void 0}(t._movement,n)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}let x=e=>e,k={enabled:(e=!0)=>e,eventOptions:(e,t,r)=>l(l({},r.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return n.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?n.toVector(e):void 0,transform(e,t,r){let n=e||r.shared.transform;return this.hasCustomTransform=!!n,n||x},threshold:e=>n.toVector(e,0)},E=0,A=l(l({},k),{},{axis(e,t,{axis:r}){if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:(e=E)=>e,bounds(e={}){if("function"==typeof e)return t=>A.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;let{left:t=-1/0,right:r=1/0,top:n=-1/0,bottom:i=1/0}=e;return[[t,r],[n,i]]}}),P={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]},M="undefined"!=typeof window&&window.document&&window.document.createElement;function C(){return M&&"ontouchstart"in window||M&&window.navigator.maxTouchPoints>1}let U={isBrowser:M,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:C(),touchscreen:C(),pointer:M&&"onpointerdown"in window,pointerLock:M&&"exitPointerLock"in window.document},T=10,D={mouse:0,touch:0,pen:8},I=l(l({},A),{},{device(e,t,{pointer:{touch:r=!1,lock:n=!1,mouse:i=!1}={}}){return(this.pointerLock=n&&U.pointerLock,U.touch&&r)?"touch":this.pointerLock?"mouse":U.pointer&&!i?"pointer":U.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:r}){if(this.preventScrollDelay="number"==typeof r?r:r||void 0===r&&e?250:void 0,U.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture(e,t,{pointer:{capture:r=!0,buttons:n=1,keys:i=!0}={}}){return this.pointerButtons=n,this.keys=i,!this.pointerLock&&"pointer"===this.device&&r},threshold(e,t,{filterTaps:r=!1,tapsThreshold:i=3,axis:a}){let s=n.toVector(e,r?i:a?1:0);return this.filterTaps=r,this.tapsThreshold=i,s},swipe({velocity:e=.5,distance:t=50,duration:r=250}={}){return{velocity:this.transform(n.toVector(e)),distance:this.transform(n.toVector(t)),duration:r}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?l(l({},D),e):D,keyboardDisplacement:(e=T)=>e});l(l({},k),{},{device(e,t,{shared:r,pointer:{touch:n=!1}={}}){if(r.target&&!U.touch&&U.gesture)return"gesture";if(U.touch&&n)return"touch";if(U.touchscreen){if(U.pointer)return"pointer";if(U.touch)return"touch"}},bounds(e,t,{scaleBounds:r={},angleBounds:n={}}){let i=e=>{let t=b(y(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},a=e=>{let t=b(y(n,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof r&&"function"!=typeof n?[i(),a()]:e=>[i(e),a(e)]},threshold(e,t,r){this.lockDirection="lock"===r.axis;let i=n.toVector(e,this.lockDirection?[.1,3]:0);return i},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e}),l(l({},A),{},{mouseOnly:(e=!0)=>e}),l(l({},A),{},{mouseOnly:(e=!0)=>e});let O=new Map,R=new Map,z={key:"drag",engine:class extends S{constructor(...e){super(...e),s(this,"ingKey","dragging")}reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),n={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=A.bounds(n)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let t=this.config,r=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;let n=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),n&&n.size>1&&r._pointerActive||(this.start(e),this.setupPointer(e),r._pointerId=m(e),r._pointerActive=!0,this.computeValues(g(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==p(e)?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let t=this.state,r=this.config;if(!t._pointerActive)return;let i=m(e);if(void 0!==t._pointerId&&i!==t._pointerId)return;let a=g(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=n.sub(a,t._values),this.computeValues(a)),n.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll){if(!t.axis)return;if(t.axis===r.preventScrollAxis||"xy"===r.preventScrollAxis){t._active=!1,this.clean();return}this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(e){}let t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;let n=m(e);if(void 0!==t._pointerId&&n!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[i,a]=t._distance;if(t.tap=i<=r.tapsThreshold&&a<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{let[e,n]=t._delta,[i,a]=t._movement,[s,o]=r.swipe.velocity,[l,u]=r.swipe.distance,c=r.swipe.duration;if(t.elapsedTime<c){let r=Math.abs(e/t.timeDelta),c=Math.abs(n/t.timeDelta);r>s&&Math.abs(i)>l&&(t.swipe[0]=Math.sign(e)),c>o&&Math.abs(a)>u&&(t.swipe[1]=Math.sign(n))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,"persist"in e&&"function"==typeof e.persist&&e.persist();let t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let t=P[e.key];if(t){let r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,n.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in P&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:I};var F=r(5754);let L={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=U.isBrowser?window:void 0)=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},V=["target","eventOptions","window","enabled","transform"];function j(e={},t){let r={};for(let[n,i]of Object.entries(t))switch(typeof i){case"function":r[n]=i.call(r,e[n],n,e);break;case"object":r[n]=j(e[n],i);break;case"boolean":i&&(r[n]=e[n])}return r}class B{constructor(e,t){s(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,n,i){let a=this._listeners,s=function(e,t=""){let r=u[e],n=r&&r[t]||t;return e+n}(t,r),o=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=l(l({},o),i);e.addEventListener(s,n,c);let h=()=>{e.removeEventListener(s,n,c),a.delete(h)};return a.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class N{constructor(){s(this,"_timeouts",new Map)}add(e,t,r=140,...n){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...n))}remove(e){let t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class q{constructor(e){s(this,"gestures",new Set),s(this,"_targetEventStore",new B(this)),s(this,"gestureEventStores",{}),s(this,"gestureTimeoutStores",{}),s(this,"handlers",{}),s(this,"config",{}),s(this,"pointerIds",new Set),s(this,"touchIds",new Set),s(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),e.drag&&H(this,"drag"),e.wheel&&H(this,"wheel"),e.scroll&&H(this,"scroll"),e.move&&H(this,"move"),e.pinch&&H(this,"pinch"),e.hover&&H(this,"hover")}setEventIds(e){return f(e)?(this.touchIds=new Set(Array.from(e.touches).filter(t=>{var r,n;return t.target===e.currentTarget||(null===(r=e.currentTarget)||void 0===r?void 0:null===(n=r.contains)||void 0===n?void 0:n.call(r,t.target))}).map(e=>e.identifier)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,r={}){let{target:n,eventOptions:i,window:a,enabled:s,transform:o}=e,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,V);if(r.shared=j({target:n,eventOptions:i,window:a,enabled:s,transform:o},L),t){let e=R.get(t);r[t]=j(l({shared:r.shared},u),e)}else for(let e in u){let t=R.get(e);t&&(r[e]=j(l({shared:r.shared},u[e]),t))}return r}(e,t,this.config)}clean(){for(let e of(this._targetEventStore.clean(),this.gestures))this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){let t;let r=this.config.shared,n={};if(!r.target||(t=r.target())){if(r.enabled){for(let r of this.gestures){let i=this.config[r],a=$(n,i.eventOptions,!!t);if(i.enabled){let t=O.get(r);new t(this,e,r).bind(a)}}let i=$(n,r.eventOptions,!!t);for(let t in this.nativeHandlers)i(t,"",r=>this.nativeHandlers[t](l(l({},this.state.shared),{},{event:r,args:e})),void 0,!0)}for(let e in n)n[e]=function(...e){return 0===e.length?w:1===e.length?e[0]:function(){let t;for(let r of e)t=r.apply(this,arguments)||t;return t}}(...n[e]);if(!t)return n;for(let e in n){let{device:r,capture:i,passive:a}=function(e){let t=e.substring(2).toLowerCase(),r=!!~t.indexOf("passive");r&&(t=t.replace("passive",""));let n=d.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(n);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:r}}(e);this._targetEventStore.add(t,r,"",n[e],{capture:i,passive:a})}}}}function H(e,t){e.gestures.add(t),e.gestureEventStores[t]=new B(e,t),e.gestureTimeoutStores[t]=new N}let $=(e,t,r)=>(n,i,a,s={},o=!1)=>{var l,d;let f=null!==(l=s.capture)&&void 0!==l?l:t.capture,p=null!==(d=s.passive)&&void 0!==d?d:t.passive,v=o?n:function(e,t="",r=!1){let n=u[e],i=n&&n[t]||t;return"on"+c(e)+c(i)+(!function(e=!1,t){return e&&!h.includes(t)}(r,i)?"":"Capture")}(n,i,f);r&&p&&(v+="Passive"),e[v]=e[v]||[],e[v].push(a)};function W(e,t){return O.set(z.key,z.engine),R.set(z.key,z.resolver),function(e,t={},r,n){let i=F.useMemo(()=>new q(e),[]);if(i.applyHandlers(e,void 0),i.applyConfig(t,r),F.useEffect(i.effect.bind(i)),F.useEffect(()=>i.clean.bind(i),[]),void 0===t.target)return i.bind.bind(i)}({drag:e},t||{},"drag")}},1517:function(e,t,r){"use strict";var n,i;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(8216)},8216:function(e){!function(){var t={229:function(e){var t,r,n,i=e.exports={};function a(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l=[],u=!1,c=-1;function h(){u&&n&&(u=!1,n.length?l=n.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=o(h);u=!0;for(var t=l.length;t;){for(n=l,l=[];++c<t;)n&&n[c].run();c=-1,t=l.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}},s=!0;try{t[e](a,a.exports,n),s=!1}finally{s&&delete r[e]}return a.exports}n.ab="//";var i=n(229);e.exports=i}()},8829:function(e,t,r){"use strict";r.d(t,{a:function(){return t7},q_:function(){return t0}});var n,i,a,s=r(6227),o=r(5754),l=Object.defineProperty,u={};((e,t)=>{for(var r in t)l(e,r,{get:t[r],enumerable:!0})})(u,{assign:()=>B,colors:()=>L,createStringInterpolator:()=>n,skipAnimation:()=>V,to:()=>i,willAdvance:()=>j});var c=A(),h=e=>S(e,c),d=A();h.write=e=>S(e,d);var f=A();h.onStart=e=>S(e,f);var p=A();h.onFrame=e=>S(e,p);var v=A();h.onFinish=e=>S(e,v);var m=[];h.setTimeout=(e,t)=>{let r=h.now()+t,n=()=>{let e=m.findIndex(e=>e.cancel==n);~e&&m.splice(e,1),b-=~e?1:0},i={time:r,handler:e,cancel:n};return m.splice(g(r),0,i),b+=1,x(),i};var g=e=>~(~m.findIndex(t=>t.time>e)||~m.length);h.cancel=e=>{f.delete(e),p.delete(e),v.delete(e),c.delete(e),d.delete(e)},h.sync=e=>{_=!0,h.batchedUpdates(e),_=!1},h.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function n(...e){t=e,h.onStart(r)}return n.handler=e,n.cancel=()=>{f.delete(r),t=null},n};var y="undefined"!=typeof window?window.requestAnimationFrame:()=>{};h.use=e=>y=e,h.now="undefined"!=typeof performance?()=>performance.now():Date.now,h.batchedUpdates=e=>e(),h.catch=console.error,h.frameLoop="always",h.advance=()=>{"demand"!==h.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):E()};var w=-1,b=0,_=!1;function S(e,t){_?(t.delete(e),e(0)):(t.add(e),x())}function x(){w<0&&(w=0,"demand"!==h.frameLoop&&y(k))}function k(){~w&&(y(k),h.batchedUpdates(E))}function E(){let e=w;w=h.now();let t=g(w);if(t&&(P(m.splice(0,t),e=>e.handler()),b-=t),!b){w=-1;return}f.flush(),c.flush(e?Math.min(64,w-e):16.667),p.flush(),d.flush(),v.flush()}function A(){let e=new Set,t=e;return{add(r){b+=t!=e||e.has(r)?0:1,e.add(r)},delete:r=>(b-=t==e&&e.has(r)?1:0,e.delete(r)),flush(r){t.size&&(e=new Set,b-=t.size,P(t,t=>t(r)&&e.add(t)),b+=e.size,t=e)}}}function P(e,t){e.forEach(e=>{try{t(e)}catch(e){h.catch(e)}})}function M(){}var C=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),U={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function T(e,t){if(U.arr(e)){if(!U.arr(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var D=(e,t)=>e.forEach(t);function I(e,t,r){if(U.arr(e)){for(let n=0;n<e.length;n++)t.call(r,e[n],`${n}`);return}for(let n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n)}var O=e=>U.und(e)?[]:U.arr(e)?e:[e];function R(e,t){if(e.size){let r=Array.from(e);e.clear(),D(r,t)}}var z=(e,...t)=>R(e,e=>e(...t)),F=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),L=null,V=!1,j=M,B=e=>{e.to&&(i=e.to),e.now&&(h.now=e.now),void 0!==e.colors&&(L=e.colors),null!=e.skipAnimation&&(V=e.skipAnimation),e.createStringInterpolator&&(n=e.createStringInterpolator),e.requestAnimationFrame&&h.use(e.requestAnimationFrame),e.batchedUpdates&&(h.batchedUpdates=e.batchedUpdates),e.willAdvance&&(j=e.willAdvance),e.frameLoop&&(h.frameLoop=e.frameLoop)},N=new Set,q=[],H=[],$=0,W={get idle(){return!N.size&&!q.length},start(e){$>e.priority?(N.add(e),h.onStart(X)):(G(e),h(K))},advance:K,sort(e){if($)h.onFrame(()=>W.sort(e));else{let t=q.indexOf(e);~t&&(q.splice(t,1),Z(e))}},clear(){q=[],N.clear()}};function X(){N.forEach(G),N.clear(),h(K)}function G(e){q.includes(e)||Z(e)}function Z(e){q.splice(function(e,t){let r=e.findIndex(t);return r<0?e.length:r}(q,t=>t.priority>e.priority),0,e)}function K(e){let t=H;for(let r=0;r<q.length;r++){let n=q[r];$=n.priority,n.idle||(j(n),n.advance(e),n.idle||t.push(n))}return $=0,(H=q).length=0,(q=t).length>0}var Q="[-+]?\\d*\\.?\\d+",Y=Q+"%";function J(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var ee=RegExp("rgb"+J(Q,Q,Q)),et=RegExp("rgba"+J(Q,Q,Q,Q)),er=RegExp("hsl"+J(Q,Y,Y)),en=RegExp("hsla"+J(Q,Y,Y,Q)),ei=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ea=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,es=/^#([0-9a-fA-F]{6})$/,eo=/^#([0-9a-fA-F]{8})$/;function el(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function eu(e,t,r){let n=r<.5?r*(1+t):r+t-r*t,i=2*r-n,a=el(i,n,e+1/3),s=el(i,n,e),o=el(i,n,e-1/3);return Math.round(255*a)<<24|Math.round(255*s)<<16|Math.round(255*o)<<8}function ec(e){let t=parseInt(e,10);return t<0?0:t>255?255:t}function eh(e){let t=parseFloat(e);return(t%360+360)%360/360}function ed(e){let t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function ef(e){let t=parseFloat(e);return t<0?0:t>100?1:t/100}function ep(e){let t;let r="number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=es.exec(e))?parseInt(t[1]+"ff",16)>>>0:L&&void 0!==L[e]?L[e]:(t=ee.exec(e))?(ec(t[1])<<24|ec(t[2])<<16|ec(t[3])<<8|255)>>>0:(t=et.exec(e))?(ec(t[1])<<24|ec(t[2])<<16|ec(t[3])<<8|ed(t[4]))>>>0:(t=ei.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=eo.exec(e))?parseInt(t[1],16)>>>0:(t=ea.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=er.exec(e))?(255|eu(eh(t[1]),ef(t[2]),ef(t[3])))>>>0:(t=en.exec(e))?(eu(eh(t[1]),ef(t[2]),ef(t[3]))|ed(t[4]))>>>0:null;if(null===r)return e;r=r||0;let n=(4278190080&r)>>>24,i=(16711680&r)>>>16,a=(65280&r)>>>8,s=(255&r)/255;return`rgba(${n}, ${i}, ${a}, ${s})`}var ev=(e,t,r)=>{if(U.fun(e))return e;if(U.arr(e))return ev({range:e,output:t,extrapolate:r});if(U.str(e.output[0]))return n(e);let i=e.output,a=e.range||[0,1],s=e.extrapolateLeft||e.extrapolate||"extend",o=e.extrapolateRight||e.extrapolate||"extend",l=e.easing||(e=>e);return t=>{let r=function(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}(t,a);return function(e,t,r,n,i,a,s,o,l){let u=l?l(e):e;if(u<t){if("identity"===s)return u;"clamp"===s&&(u=t)}if(u>r){if("identity"===o)return u;"clamp"===o&&(u=r)}return n===i?n:t===r?e<=t?n:i:(t===-1/0?u=-u:r===1/0?u-=t:u=(u-t)/(r-t),u=a(u),n===-1/0?u=-u:i===1/0?u+=n:u=u*(i-n)+n,u)}(t,a[r],a[r+1],i[r],i[r+1],l,s,o,e.map)}},em=Symbol.for("FluidValue.get"),eg=Symbol.for("FluidValue.observers"),ey=e=>!!(e&&e[em]),ew=e=>e&&e[em]?e[em]():e,eb=e=>e[eg]||null;function e_(e,t){let r=e[eg];r&&r.forEach(e=>{e.eventObserved?e.eventObserved(t):e(t)})}var eS=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");ex(this,e)}},ex=(e,t)=>eA(e,em,t);function ek(e,t){if(e[em]){let r=e[eg];r||eA(e,eg,r=new Set),!r.has(t)&&(r.add(t),e.observerAdded&&e.observerAdded(r.size,t))}return t}function eE(e,t){let r=e[eg];if(r&&r.has(t)){let n=r.size-1;n?r.delete(t):e[eg]=null,e.observerRemoved&&e.observerRemoved(n,t)}}var eA=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),eP=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,eM=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,eC=RegExp(`(${eP.source})(%|[a-z]+)`,"i"),eU=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,eT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,eD=e=>{let[t,r]=eI(e);if(!t||F())return e;let n=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(n)return n.trim();if(r&&r.startsWith("--")){let e=window.getComputedStyle(document.documentElement).getPropertyValue(r);if(e)return e}else if(r&&eT.test(r))return eD(r);else if(r)return r;return e},eI=e=>{let t=eT.exec(e);if(!t)return[,];let[,r,n]=t;return[r,n]},eO=(e,t,r,n,i)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(n)}, ${i})`,eR=e=>{a||(a=L?RegExp(`(${Object.keys(L).join("|")})(?!\\w)`,"g"):/^\b$/);let t=e.output.map(e=>ew(e).replace(eT,eD).replace(eM,ep).replace(a,ep)),r=t.map(e=>e.match(eP).map(Number)),n=r[0].map((e,t)=>r.map(e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})),i=n.map(t=>ev({...e,output:t}));return e=>{let r=!eC.test(t[0])&&t.find(e=>eC.test(e))?.replace(eP,""),n=0;return t[0].replace(eP,()=>`${i[n++](e)}${r||""}`).replace(eU,eO)}},ez="react-spring: ",eF=e=>{let t=!1;if("function"!=typeof e)throw TypeError(`${ez}once requires a function parameter`);return(...r)=>{t||(e(...r),t=!0)}},eL=eF(console.warn),eV=eF(console.warn);function ej(e){return U.str(e)&&("#"==e[0]||/\d/.test(e)||!F()&&eT.test(e)||e in(L||{}))}var eB=F()?o.useEffect:o.useLayoutEffect,eN=()=>{let e=(0,o.useRef)(!1);return eB(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function eq(){let e=(0,o.useState)()[1],t=eN();return()=>{t.current&&e(Math.random())}}var eH=e=>(0,o.useEffect)(e,e$),e$=[];function eW(e){let t=(0,o.useRef)();return(0,o.useEffect)(()=>{t.current=e}),t.current}var eX=Symbol.for("Animated:node"),eG=e=>!!e&&e[eX]===e,eZ=e=>e&&e[eX],eK=(e,t)=>C(e,eX,t),eQ=e=>e&&e[eX]&&e[eX].getPayload(),eY=class{constructor(){eK(this,this)}getPayload(){return this.payload||[]}},eJ=class extends eY{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,U.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new eJ(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return U.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){let{done:e}=this;this.done=!1,U.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},e1=class extends eJ{constructor(e){super(0),this._string=null,this._toString=ev({output:[e,e]})}static create(e){return new e1(e)}getValue(){let e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(U.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=ev({output:[this.getValue(),e]})),this._value=0,super.reset()}},e0={dependencies:null},e2=class extends eY{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){let t={};return I(this.source,(r,n)=>{eG(r)?t[n]=r.getValue(e):ey(r)?t[n]=ew(r):e||(t[n]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&D(this.payload,e=>e.reset())}_makePayload(e){if(e){let t=new Set;return I(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){e0.dependencies&&ey(e)&&e0.dependencies.add(e);let t=eQ(e);t&&D(t,e=>this.add(e))}},e3=class extends e2{constructor(e){super(e)}static create(e){return new e3(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){let t=this.getPayload();return e.length==t.length?t.map((t,r)=>t.setValue(e[r])).some(Boolean):(super.setValue(e.map(e5)),!0)}};function e5(e){let t=ej(e)?e1:eJ;return t.create(e)}function e4(e){let t=eZ(e);return t?t.constructor:U.arr(e)?e3:ej(e)?e1:eJ}var e6=(e,t)=>{let r=!U.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,o.forwardRef)((n,i)=>{let a=(0,o.useRef)(null),s=r&&(0,o.useCallback)(e=>{a.current=(i&&(U.fun(i)?i(e):i.current=e),e)},[i]),[l,u]=function(e,t){let r=new Set;return e0.dependencies=r,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new e2(e),e0.dependencies=null,[e,r]}(n,t),c=eq(),d=()=>{let e=a.current;if(r&&!e)return;let n=!!e&&t.applyAnimatedValues(e,l.getValue(!0));!1===n&&c()},f=new e7(d,u),p=(0,o.useRef)();eB(()=>(p.current=f,D(u,e=>ek(e,f)),()=>{p.current&&(D(p.current.deps,e=>eE(e,p.current)),h.cancel(p.current.update))})),(0,o.useEffect)(d,[]),eH(()=>()=>{let e=p.current;D(e.deps,t=>eE(t,e))});let v=t.getComponentProps(l.getValue());return o.createElement(e,{...v,ref:s})})},e7=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&h.write(this.update)}},e8=Symbol.for("AnimatedComponent"),e9=e=>U.str(e)?e:e&&U.str(e.displayName)?e.displayName:U.fun(e)&&e.name||null;function te(e,...t){return U.fun(e)?e(...t):e}var tt=(e,t)=>!0===e||!!(t&&e&&(U.fun(e)?e(t):O(e).includes(t))),tr=(e,t)=>U.obj(e)?t&&e[t]:e,tn=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,ti=e=>e,ta=(e,t=ti)=>{let r=ts;e.default&&!0!==e.default&&(r=Object.keys(e=e.default));let n={};for(let i of r){let r=t(e[i],i);U.und(r)||(n[i]=r)}return n},ts=["config","onProps","onStart","onChange","onPause","onResume","onRest"],to={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function tl(e){let t=function(e){let t={},r=0;if(I(e,(e,n)=>{!to[n]&&(t[n]=e,r++)}),r)return t}(e);if(t){let r={to:t};return I(e,(e,n)=>n in t||(r[n]=e)),r}return{...e}}function tu(e){return e=ew(e),U.arr(e)?e.map(tu):ej(e)?u.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function tc(e){return U.fun(e)||U.arr(e)&&U.obj(e[0])}var th={tension:170,friction:26,mass:1,damping:1,easing:e=>e,clamp:!1},td=class{constructor(){this.velocity=0,Object.assign(this,th)}};function tf(e,t){if(U.und(t.decay)){let r=!U.und(t.tension)||!U.und(t.friction);!r&&U.und(t.frequency)&&U.und(t.damping)&&U.und(t.mass)||(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}else e.duration=void 0}var tp=[],tv=class{constructor(){this.changed=!1,this.values=tp,this.toValues=null,this.fromValues=tp,this.config=new td,this.immediate=!1}};function tm(e,{key:t,props:r,defaultProps:n,state:i,actions:a}){return new Promise((s,o)=>{let l,c;let d=tt(r.cancel??n?.cancel,t);if(d)v();else{U.und(r.pause)||(i.paused=tt(r.pause,t));let e=n?.pause;!0!==e&&(e=i.paused||tt(e,t)),l=te(r.delay||0,t),e?(i.resumeQueue.add(p),a.pause()):(a.resume(),p())}function f(){i.resumeQueue.add(p),i.timeouts.delete(c),c.cancel(),l=c.time-h.now()}function p(){l>0&&!u.skipAnimation?(i.delayed=!0,c=h.setTimeout(v,l),i.pauseQueue.add(f),i.timeouts.add(c)):v()}function v(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(c),e<=(i.cancelId||0)&&(d=!0);try{a.start({...r,callId:e,cancel:d},s)}catch(e){o(e)}}})}var tg=(e,t)=>1==t.length?t[0]:t.some(e=>e.cancelled)?tb(e.get()):t.every(e=>e.noop)?ty(e.get()):tw(e.get(),t.every(e=>e.finished)),ty=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),tw=(e,t,r=!1)=>({value:e,finished:t,cancelled:r}),tb=e=>({value:e,cancelled:!0,finished:!1});function t_(e,t,r,n){let{callId:i,parentId:a,onRest:s}=t,{asyncTo:o,promise:l}=r;return a||e!==o||t.reset?r.promise=(async()=>{let c,d,f;r.asyncId=i,r.asyncTo=e;let p=ta(t,(e,t)=>"onRest"===t?void 0:e),v=new Promise((e,t)=>(c=e,d=t)),m=e=>{let t=i<=(r.cancelId||0)&&tb(n)||i!==r.asyncId&&tw(n,!1);if(t)throw e.result=t,d(e),e},g=(e,t)=>{let a=new tx,s=new tk;return(async()=>{if(u.skipAnimation)throw tS(r),s.result=tw(n,!1),d(s),s;m(a);let o=U.obj(e)?{...e}:{...t,to:e};o.parentId=i,I(p,(e,t)=>{U.und(o[t])&&(o[t]=e)});let l=await n.start(o);return m(a),r.paused&&await new Promise(e=>{r.resumeQueue.add(e)}),l})()};if(u.skipAnimation)return tS(r),tw(n,!1);try{let t;t=U.arr(e)?(async e=>{for(let t of e)await g(t)})(e):Promise.resolve(e(g,n.stop.bind(n))),await Promise.all([t.then(c),v]),f=tw(n.get(),!0,!1)}catch(e){if(e instanceof tx)f=e.result;else if(e instanceof tk)f=e.result;else throw e}finally{i==r.asyncId&&(r.asyncId=a,r.asyncTo=a?o:void 0,r.promise=a?l:void 0)}return U.fun(s)&&h.batchedUpdates(()=>{s(f,n,n.item)}),f})():l}function tS(e,t){R(e.timeouts,e=>e.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var tx=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},tk=class extends Error{constructor(){super("SkipAnimationSignal")}},tE=e=>e instanceof tP,tA=1,tP=class extends eS{constructor(){super(...arguments),this.id=tA++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=eZ(this);return e&&e.getValue()}to(...e){return u.to(this,e)}interpolate(...e){return eL(`${ez}The "interpolate" function is deprecated in v9 (use "to" instead)`),u.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){e_(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||W.sort(this),e_(this,{type:"priority",parent:this,priority:e})}},tM=Symbol.for("SpringPhase"),tC=e=>(1&e[tM])>0,tU=e=>(2&e[tM])>0,tT=e=>(4&e[tM])>0,tD=(e,t)=>t?e[tM]|=3:e[tM]&=-3,tI=(e,t)=>t?e[tM]|=4:e[tM]&=-5,tO=class extends tP{constructor(e,t){if(super(),this.animation=new tv,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!U.und(e)||!U.und(t)){let r=U.obj(e)?{...e}:{...t,from:e};U.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(tU(this)||this._state.asyncTo)||tT(this)}get goal(){return ew(this.animation.to)}get velocity(){let e=eZ(this);return e instanceof eJ?e.lastVelocity||0:e.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return tC(this)}get isAnimating(){return tU(this)}get isPaused(){return tT(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1,n=this.animation,{toValues:i}=n,{config:a}=n,s=eQ(n.to);!s&&ey(n.to)&&(i=O(ew(n.to))),n.values.forEach((o,l)=>{if(o.done)return;let u=o.constructor==e1?1:s?s[l].lastPosition:i[l],c=n.immediate,h=u;if(!c){let t;if(h=o.lastPosition,a.tension<=0){o.done=!0;return}let r=o.elapsedTime+=e,i=n.fromValues[l],s=null!=o.v0?o.v0:o.v0=U.arr(a.velocity)?a.velocity[l]:a.velocity,d=a.precision||(i==u?.005:Math.min(1,.001*Math.abs(u-i)));if(U.und(a.duration)){if(a.decay){let e=!0===a.decay?.998:a.decay,n=Math.exp(-(1-e)*r);h=i+s/(1-e)*(1-n),c=Math.abs(o.lastPosition-h)<=d,t=s*n}else{t=null==o.lastVelocity?s:o.lastVelocity;let r=a.restVelocity||d/10,n=a.clamp?0:a.bounce,l=!U.und(n),f=i==u?o.v0>0:i<u,p=Math.ceil(e/1);for(let e=0;e<p&&!(!(Math.abs(t)>r)&&(c=Math.abs(u-h)<=d));++e){l&&(h==u||h>u==f)&&(t=-t*n,h=u);let e=-(1e-6*a.tension)*(h-u),r=-(.001*a.friction)*t,i=(e+r)/a.mass;t+=1*i,h+=1*t}}}else{let n=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,o.durationProgress>0&&(o.elapsedTime=a.duration*o.durationProgress,r=o.elapsedTime+=e)),n=(n=(a.progress||0)+r/this._memoizedDuration)>1?1:n<0?0:n,o.durationProgress=n),t=((h=i+a.easing(n)*(u-i))-o.lastPosition)/e,c=1==n}o.lastVelocity=t,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),c=!0)}s&&!s[l].done&&(c=!1),c?o.done=!0:t=!1,o.setValue(h,a.round)&&(r=!0)});let o=eZ(this),l=o.getValue();if(t){let e=ew(n.to);(l!==e||r)&&!a.decay?(o.setValue(e),this._onChange(e)):r&&a.decay&&this._onChange(l),this._stop()}else r&&this._onChange(l)}set(e){return h.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(tU(this)){let{to:e,config:t}=this.animation;h.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){let t=this.queue||(this.queue=[]);return t.push(e),this}start(e,t){let r;return U.und(e)?(r=this.queue||[],this.queue=[]):r=[U.obj(e)?e:{...t,to:e}],Promise.all(r.map(e=>{let t=this._update(e);return t})).then(e=>tg(this,e))}stop(e){let{to:t}=this.animation;return this._focus(this.get()),tS(this._state,e&&this._lastCallId),h.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){let t=this.key||"",{to:r,from:n}=e;(null==(r=U.obj(r)?r[t]:r)||tc(r))&&(r=void 0),null==(n=U.obj(n)?n[t]:n)&&(n=void 0);let i={to:r,from:n};return tC(this)||(e.reverse&&([r,n]=[n,r]),n=ew(n),U.und(n)?eZ(this)||this._set(r):this._set(n)),i}_update({...e},t){let{key:r,defaultProps:n}=this;e.default&&Object.assign(n,ta(e,(e,t)=>/^on/.test(t)?tr(e,r):e)),tj(this,e,"onProps"),tB(this,"onProps",e,this);let i=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let a=this._state;return tm(++this._lastCallId,{key:r,props:e,defaultProps:n,state:a,actions:{pause:()=>{tT(this)||(tI(this,!0),z(a.pauseQueue),tB(this,"onPause",tw(this,tR(this,this.animation.to)),this))},resume:()=>{tT(this)&&(tI(this,!1),tU(this)&&this._resume(),z(a.resumeQueue),tB(this,"onResume",tw(this,tR(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(r=>{if(e.loop&&r.finished&&!(t&&r.noop)){let t=tz(e);if(t)return this._update(t,!0)}return r})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(tb(this));let n=!U.und(e.to),i=!U.und(e.from);if(n||i){if(!(t.callId>this._lastToId))return r(tb(this));this._lastToId=t.callId}let{key:a,defaultProps:s,animation:o}=this,{to:l,from:u}=o,{to:c=l,from:d=u}=e;i&&!n&&(!t.default||U.und(c))&&(c=d),t.reverse&&([c,d]=[d,c]);let f=!T(d,u);f&&(o.from=d),d=ew(d);let p=!T(c,l);p&&this._focus(c);let v=tc(t.to),{config:m}=o,{decay:g,velocity:y}=m;(n||i)&&(m.velocity=0),t.config&&!v&&function(e,t,r){for(let n in r&&(tf(r={...r},t),t={...r,...t}),tf(e,t),Object.assign(e,t),th)null==e[n]&&(e[n]=th[n]);let{frequency:n,damping:i}=e,{mass:a}=e;U.und(n)||(n<.01&&(n=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/n,2)*a,e.friction=4*Math.PI*i*a/n)}(m,te(t.config,a),t.config!==s.config?te(s.config,a):void 0);let w=eZ(this);if(!w||U.und(c))return r(tw(this,!0));let b=U.und(t.reset)?i&&!t.default:!U.und(d)&&tt(t.reset,a),_=b?d:this.get(),S=tu(c),x=U.num(S)||U.arr(S)||ej(S),k=!v&&(!x||tt(s.immediate||t.immediate,a));if(p){let e=e4(c);if(e!==w.constructor){if(k)w=this._set(S);else throw Error(`Cannot animate between ${w.constructor.name} and ${e.name}, as the "to" prop suggests`)}}let E=w.constructor,A=ey(c),P=!1;if(!A){let e=b||!tC(this)&&f;(p||e)&&(A=!(P=T(tu(_),S))),(T(o.immediate,k)||k)&&T(m.decay,g)&&T(m.velocity,y)||(A=!0)}if(P&&tU(this)&&(o.changed&&!b?A=!0:A||this._stop(l)),!v&&((A||ey(l))&&(o.values=w.getPayload(),o.toValues=ey(c)?null:E==e1?[1]:O(S)),o.immediate==k||(o.immediate=k,k||b||this._set(l)),A)){let{onRest:e}=o;D(tV,e=>tj(this,t,e));let n=tw(this,tR(this,l));z(this._pendingCalls,n),this._pendingCalls.add(r),o.changed&&h.batchedUpdates(()=>{o.changed=!b,e?.(n,this),b?te(s.onRest,n):o.onStart?.(n,this)})}b&&this._set(_),v?r(t_(t.to,t,this._state,this)):A?this._start():tU(this)&&!p?this._pendingCalls.add(r):r(ty(_))}_focus(e){let t=this.animation;e!==t.to&&(eb(this)&&this._detach(),t.to=e,eb(this)&&this._attach())}_attach(){let e=0,{to:t}=this.animation;ey(t)&&(ek(t,this),tE(t)&&(e=t.priority+1)),this.priority=e}_detach(){let{to:e}=this.animation;ey(e)&&eE(e,this)}_set(e,t=!0){let r=ew(e);if(!U.und(r)){let e=eZ(this);if(!e||!T(r,e.getValue())){let n=e4(r);e&&e.constructor==n?e.setValue(r):eK(this,n.create(r)),e&&h.batchedUpdates(()=>{this._onChange(r,t)})}}return eZ(this)}_onStart(){let e=this.animation;e.changed||(e.changed=!0,tB(this,"onStart",tw(this,tR(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),te(this.animation.onChange,e,this)),te(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){let e=this.animation;eZ(this).reset(ew(e.to)),e.immediate||(e.fromValues=e.values.map(e=>e.lastPosition)),tU(this)||(tD(this,!0),tT(this)||this._resume())}_resume(){u.skipAnimation?this.finish():W.start(this)}_stop(e,t){if(tU(this)){tD(this,!1);let r=this.animation;D(r.values,e=>{e.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),e_(this,{type:"idle",parent:this});let n=t?tb(this.get()):tw(this.get(),tR(this,e??r.to));z(this._pendingCalls,n),r.changed&&(r.changed=!1,tB(this,"onRest",n,this))}}};function tR(e,t){let r=tu(t),n=tu(e.get());return T(n,r)}function tz(e,t=e.loop,r=e.to){let n=te(t);if(n){let i=!0!==n&&tl(n),a=(i||e).reverse,s=!i||i.reset;return tF({...e,loop:t,default:!1,pause:void 0,to:!a||tc(r)?r:void 0,from:s?e.from:void 0,reset:s,...i})}}function tF(e){let{to:t,from:r}=e=tl(e),n=new Set;return U.obj(t)&&tL(t,n),U.obj(r)&&tL(r,n),e.keys=n.size?Array.from(n):null,e}function tL(e,t){I(e,(e,r)=>null!=e&&t.add(r))}var tV=["onStart","onRest","onChange","onPause","onResume"];function tj(e,t,r){e.animation[r]=t[r]!==tn(t,r)?tr(t[r],e.key):void 0}function tB(e,t,...r){e.animation[t]?.(...r),e.defaultProps[t]?.(...r)}var tN=["onStart","onChange","onRest"],tq=1,tH=class{constructor(e,t){this.id=tq++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){let e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(let t in e){let r=e[t];U.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(tF(e)),this}start(e){let{queue:t}=this;return(e?t=O(e).map(tF):this.queue=[],this._flush)?this._flush(this,t):(tQ(this,t),t$(this,t))}stop(e,t){if(!!e!==e&&(t=e),t){let r=this.springs;D(O(t),t=>r[t].stop(!!e))}else tS(this._state,this._lastAsyncId),this.each(t=>t.stop(!!e));return this}pause(e){if(U.und(e))this.start({pause:!0});else{let t=this.springs;D(O(e),e=>t[e].pause())}return this}resume(e){if(U.und(e))this.start({pause:!1});else{let t=this.springs;D(O(e),e=>t[e].resume())}return this}each(e){I(this.springs,e)}_onFrame(){let{onStart:e,onChange:t,onRest:r}=this._events,n=this._active.size>0,i=this._changed.size>0;(n&&!this._started||i&&!this._started)&&(this._started=!0,R(e,([e,t])=>{t.value=this.get(),e(t,this,this._item)}));let a=!n&&this._started,s=i||a&&r.size?this.get():null;i&&t.size&&R(t,([e,t])=>{t.value=s,e(t,this,this._item)}),a&&(this._started=!1,R(r,([e,t])=>{t.value=s,e(t,this,this._item)}))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}h.onFrame(this._onFrame)}};function t$(e,t){return Promise.all(t.map(t=>tW(e,t))).then(t=>tg(e,t))}async function tW(e,t,r){let{keys:n,to:i,from:a,loop:s,onRest:o,onResolve:l}=t,u=U.obj(t.default)&&t.default;s&&(t.loop=!1),!1===i&&(t.to=null),!1===a&&(t.from=null);let c=U.arr(i)||U.fun(i)?i:void 0;c?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):D(tN,r=>{let n=t[r];if(U.fun(n)){let i=e._events[r];t[r]=({finished:e,cancelled:t})=>{let r=i.get(n);r?(e||(r.finished=!1),t&&(r.cancelled=!0)):i.set(n,{value:null,finished:e||!1,cancelled:t||!1})},u&&(u[r]=t[r])}});let d=e._state;!d.paused===t.pause?(d.paused=t.pause,z(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);let f=(n||Object.keys(e.springs)).map(r=>e.springs[r].start(t)),p=!0===t.cancel||!0===tn(t,"cancel");(c||p&&d.asyncId)&&f.push(tm(++e._lastAsyncId,{props:t,state:d,actions:{pause:M,resume:M,start(t,r){p?(tS(d,e._lastAsyncId),r(tb(e))):(t.onRest=o,r(t_(c,t,d,e)))}}})),d.paused&&await new Promise(e=>{d.resumeQueue.add(e)});let v=tg(e,await Promise.all(f));if(s&&v.finished&&!(r&&v.noop)){let r=tz(t,s,i);if(r)return tQ(e,[r]),tW(e,r,!0)}return l&&h.batchedUpdates(()=>l(v,e,e.item)),v}function tX(e,t){let r={...e.springs};return t&&D(O(t),e=>{U.und(e.keys)&&(e=tF(e)),U.obj(e.to)||(e={...e,to:void 0}),tK(r,e,e=>tZ(e))}),tG(e,r),r}function tG(e,t){I(t,(t,r)=>{e.springs[r]||(e.springs[r]=t,ek(t,e))})}function tZ(e,t){let r=new tO;return r.key=e,t&&ek(r,t),r}function tK(e,t,r){t.keys&&D(t.keys,n=>{let i=e[n]||(e[n]=r(n));i._prepareNode(t)})}function tQ(e,t){D(t,t=>{tK(e.springs,t,t=>tZ(t,e))})}var tY=({children:e,...t})=>{let r=(0,o.useContext)(tJ),n=t.pause||!!r.pause,i=t.immediate||!!r.immediate;t=function(e,t){let[r]=(0,o.useState)(()=>({inputs:t,result:e()})),n=(0,o.useRef)(),i=n.current,a=i;if(a){let r=!!(t&&a.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,a.inputs));r||(a={inputs:t,result:e()})}else a=r;return(0,o.useEffect)(()=>{n.current=a,i==r&&(r.inputs=r.result=void 0)},[a]),a.result}(()=>({pause:n,immediate:i}),[n,i]);let{Provider:a}=tJ;return o.createElement(a,{value:t},e)},tJ=(Object.assign(tY,o.createContext({})),tY.Provider._context=tY,tY.Consumer._context=tY,tY);tY.Provider=tJ.Provider,tY.Consumer=tJ.Consumer;var t1=()=>{let e=[],t=function(t){eV(`${ez}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);let n=[];return D(e,(e,i)=>{if(U.und(t))n.push(e.start());else{let a=r(t,e,i);a&&n.push(e.start(a))}}),n};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){let r=e.indexOf(t);~r&&e.splice(r,1)},t.pause=function(){return D(e,e=>e.pause(...arguments)),this},t.resume=function(){return D(e,e=>e.resume(...arguments)),this},t.set=function(t){D(e,(e,r)=>{let n=U.fun(t)?t(r,e):t;n&&e.set(n)})},t.start=function(t){let r=[];return D(e,(e,n)=>{if(U.und(t))r.push(e.start());else{let i=this._getProps(t,e,n);i&&r.push(e.start(i))}}),r},t.stop=function(){return D(e,e=>e.stop(...arguments)),this},t.update=function(t){return D(e,(e,r)=>e.update(this._getProps(t,e,r))),this};let r=function(e,t,r){return U.fun(e)?e(r,t):e};return t._getProps=r,t};function t0(e,t){let r=U.fun(e),[[n],i]=function(e,t,r){let n=U.fun(t)&&t;n&&!r&&(r=[]);let i=(0,o.useMemo)(()=>n||3==arguments.length?t1():void 0,[]),a=(0,o.useRef)(0),s=eq(),l=(0,o.useMemo)(()=>({ctrls:[],queue:[],flush(e,t){let r=tX(e,t),n=a.current>0&&!l.queue.length&&!Object.keys(r).some(t=>!e.springs[t]);return n?t$(e,t):new Promise(n=>{tG(e,r),l.queue.push(()=>{n(t$(e,t))}),s()})}}),[]),u=(0,o.useRef)([...l.ctrls]),c=[],h=eW(e)||0;function d(e,r){for(let i=e;i<r;i++){let e=u.current[i]||(u.current[i]=new tH(null,l.flush)),r=n?n(i,e):t[i];r&&(c[i]=function(e){let t=tF(e);return U.und(t.default)&&(t.default=ta(t)),t}(r))}}(0,o.useMemo)(()=>{D(u.current.slice(e,h),e=>{e.ref?.delete(e),i?.delete(e),e.stop(!0)}),u.current.length=e,d(h,e)},[e]),(0,o.useMemo)(()=>{d(0,Math.min(h,e))},r);let f=u.current.map((e,t)=>tX(e,c[t])),p=(0,o.useContext)(tY),v=eW(p),m=p!==v&&function(e){for(let t in e)return!0;return!1}(p);eB(()=>{a.current++,l.ctrls=u.current;let{queue:e}=l;e.length&&(l.queue=[],D(e,e=>e())),D(u.current,(e,t)=>{i?.add(e),m&&e.start({default:p});let r=c[t];if(r){var n;(n=r.ref)&&e.ref!==n&&(e.ref?.delete(e),n.add(e),e.ref=n),e.ref?e.queue.push(r):e.start(r)}})}),eH(()=>()=>{D(l.ctrls,e=>e.stop(!0))});let g=f.map(e=>({...e}));return i?[g,i]:g}(1,r?e:[e],r?t||[]:t);return r||2==arguments.length?[n,i]:n}var t2=class extends tP{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=ev(...t);let r=this._get(),n=e4(r);eK(this,n.create(r))}advance(e){let t=this._get(),r=this.get();T(t,r)||(eZ(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&t5(this._active)&&t4(this)}_get(){let e=U.arr(this.source)?this.source.map(ew):O(ew(this.source));return this.calc(...e)}_start(){this.idle&&!t5(this._active)&&(this.idle=!1,D(eQ(this),e=>{e.done=!1}),u.skipAnimation?(h.batchedUpdates(()=>this.advance()),t4(this)):W.start(this))}_attach(){let e=1;D(O(this.source),t=>{ey(t)&&ek(t,this),tE(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){D(O(this.source),e=>{ey(e)&&eE(e,this)}),this._active.clear(),t4(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=O(this.source).reduce((e,t)=>Math.max(e,(tE(t)?t.priority:0)+1),0))}};function t3(e){return!1!==e.idle}function t5(e){return!e.size||Array.from(e).every(t3)}function t4(e){e.idle||(e.idle=!0,D(eQ(e),e=>{e.done=!0}),e_(e,{type:"idle",parent:e}))}u.assign({createStringInterpolator:eR,to:(e,t)=>new t2(e,t)}),W.advance;var t6=["primitive"].concat(Object.keys(r(207)).filter(e=>/^[A-Z]/.test(e)).map(e=>e[0].toLowerCase()+e.slice(1)));u.assign({createStringInterpolator:eR,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},frameLoop:"demand"}),(0,s.n)(()=>{h.advance()});var t7=((e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=e=>new e2(e),getComponentProps:n=e=>e}={})=>{let i={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:n},a=e=>{let t=e9(e)||"Anonymous";return(e=U.str(e)?a[e]||(a[e]=e6(e,i)):e[e8]||(e[e8]=e6(e,i))).displayName=`Animated(${t})`,e};return I(e,(t,r)=>{U.arr(e)&&(r=e9(t)),a[r]=a(t)}),{animated:a}})(t6,{applyAnimatedValues:s.j}).animated}}]);